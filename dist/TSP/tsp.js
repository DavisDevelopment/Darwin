!function(t){var e={};function s(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(i,o,function(e){return t[e]}.bind(null,o));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=2)}([function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.FLIP=0]="FLIP",t[t.SWAP=1]="SWAP"}(e.MutationMethod||(e.MutationMethod={}))},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.SINGLE_POINT=0]="SINGLE_POINT",t[t.TWO_POINT=1]="TWO_POINT",t[t.UNIFORM=2]="UNIFORM",t[t.HALF_UNIFORM=3]="HALF_UNIFORM",t[t.ORDERED=4]="ORDERED"}(e.CrossoverMethod||(e.CrossoverMethod={}))},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(3),o=document.createElement("canvas"),n=o.getContext("2d"),r=window.devicePixelRatio;o.width=window.innerWidth*r,o.height=window.innerHeight*r,o.style.width=`${window.innerWidth}px`,o.style.height=`${window.innerHeight}px`,n.scale(r,r),document.body.style.padding="0",document.body.style.margin="0",document.body.appendChild(o);const h=[];for(let t=0;t<40;t++)h.push({x:Math.floor(Math.random()*o.width),y:Math.floor(Math.random()*o.height)});const a=new i.TSP_Optimizer(h),l=a.optimize(),u=()=>{const t=l.next();a.drawShortestPath(n),t.done||requestAnimationFrame(u)};u(),a.drawShortestPath(n)},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(4),o=s(0),n=s(8),r=s(1),h=s(9);e.TSP_Optimizer=class{constructor(t=[]){this.shuffled=[],this.model=[],this.convergence_treshold=30,this.max_generation=5e3,this.fitness_k=15,this.CITY_COUNT=t.length,this.tsp=new n.TSP(t);for(let t=0;t<this.CITY_COUNT;t++)this.model[t]=t;this.genetics=new i.Darwin({population_size:500,chromosome_length:this.CITY_COUNT,rand_func:(()=>(0===this.shuffled.length&&(this.shuffled=h.shuffle(this.model)),this.shuffled.pop())).bind(this),crossover_method:r.CrossoverMethod.ORDERED,mutation_method:o.MutationMethod.SWAP,elite_count:5});let e=t.reduce((t,e)=>t>e.x?t:e.x,0),s=t.reduce((t,e)=>t>e.y?t:e.y,0);this.fitness_k*=function(t,e){const s=Math.pow(t,2),i=Math.pow(t,3),o=Math.pow(e,2),n=Math.pow(e,3),r=Math.pow(s+o,.5);return 1/15*(i/o+n/s+r*(3-s/o-o/s)+2.5*(o/t*Math.log((t+r)/e)+s/e*Math.log((e+r)/t)))}(e,s)*this.CITY_COUNT,this.best_path=this.genetics.getFittest().getGenes()}pathFitness(t){return Math.pow(2,this.fitness_k/this.tsp.distance(t))}distanceFromFitness(t){return this.fitness_k/Math.log2(t)}newGen(){this.genetics.updateFitness(t=>this.pathFitness(t)),this.genetics.mate()}*optimize(){let t=1/0,e=0;for(;this.genetics.getGeneration()!==this.max_generation&&e!==this.convergence_treshold;){this.newGen();const s=this.genetics.getFittest(),i=this.tsp.distance_squared(s.getGenes());i>=t?e++:(t=i,this.best_path=[...s.getGenes()],e=0),yield this.best_path}return this.best_path}drawShortestPath(t){this.tsp.draw(t,this.best_path),t.fillStyle="black",t.fillText(`generation : ${this.genetics.getGeneration()}`,5,15),t.fillText(`avg dist : ${this.distanceFromFitness(this.genetics.getAverageFitness()).toFixed(0)}`,5,30)}getGeneration(){return this.genetics.getGeneration()}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(5),o=s(1),n=s(0),r=s(7);e.Darwin=class{constructor(t){this.population=[],this.generation=0;const e=()=>{this.stats.needs_update=!0};for(let s=0;s<t.population_size;s++){const s=new i.Chromosome(t.chromosome_length,t.rand_func);s.on("update_fitness",e),this.population.push(s)}this.params=Object.assign({crossover_rate:.7,mutation_rate:1/t.chromosome_length,crossover_method:o.CrossoverMethod.SINGLE_POINT,mutation_method:n.MutationMethod.FLIP,elite_count:1,elite_copies:1},t),this.stats={fittest:this.population[0],avg_fitness:0,sum_fitness:0,fittest_idx:0,needs_update:!0}}duplicateElite(t){if(this.params.elite_count>0){const e=this.getTopChromosomes(this.params.elite_count);t.push(...e);for(let s=0;s<this.params.elite_count;s++)for(let i=0;i<this.params.elite_copies;i++)t.push(e[s].clone())}}crossover(t){for(;t.length<this.params.population_size;)if(Math.random()<this.params.crossover_rate){const e=this.getRandomChromosome(),s=this.getRandomChromosome(),o=e.crossover(s,this.params.crossover_method),n=new i.Chromosome(o.baby1,this.params.rand_func),r=new i.Chromosome(o.baby2,this.params.rand_func);t.push(n,r)}this.params.population_size%2==1&&t.pop()}mutate(t){for(const e of t)e.mutate(this.params.mutation_rate,this.params.mutation_method)}updateFitness(t){for(const e of this.population)e.setFitness(t(e.getGenes()));this.stats.needs_update=!0}mate(){const t=[];this.duplicateElite(t),this.crossover(t),this.mutate(t),this.population=t,this.generation++,this.updateStats(!0)}getPopulation(){return this.population}getChromosome(t){return this.population[t]}getRandomChromosome(){if(this.updateStats(),0===this.stats.sum_fitness)return this.population[Math.floor(Math.random()*this.population.length)];const t=Math.random()*this.stats.sum_fitness;let e=0;for(let s=0;s<this.population.length;s++)if((e+=this.population[s].getFitness())>t)return this.population[s];return this.population[0]}getTopChromosomes(t){return r.selectKBest(this.population,t)}getAverageFitness(){return this.stats.needs_update&&this.updateStats(),this.stats.avg_fitness}getFittest(){return this.stats.needs_update&&this.updateStats(),this.stats.fittest}getParams(){return this.params}getGeneration(){return this.generation}getStats(){return this.stats}updateStats(t=!1){if(t||this.stats.needs_update){let t=0,e=0,s=0;for(let i=0;i<this.population.length;i++){const o=this.population[i].getFitness();t+=o,o>e&&(e=o,s=i)}this.stats.sum_fitness=t,this.stats.avg_fitness=t/this.params.population_size,this.stats.fittest=this.population[s].clone(),this.stats.fittest_idx=s,this.stats.needs_update=!1}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0),o=s(1),n=s(6);class r extends n.EventEmitter{constructor(t,e){if(super(),this.bits=[],this.fitness=0,this.rand_func=e,"number"==typeof t){this.length=t;for(let t=0;t<this.length;t++)this.bits.push(e())}else this.bits=t,this.length=t.length}getFitness(){return this.fitness}setFitness(t){this.fitness=t,this.emit("update_fitness",t)}compare(t){let e=0;for(let s=0;s<Math.min(this.length,t.length);s++)e+=this.bits[s]!==t.bits[s]?1:0;return e}mutate_flip(t){for(let e=0;e<this.length;e++)Math.random()<t&&(this.bits[e]=this.rand_func())}mutate_swap(t){for(let e=0;e<this.length;e++)if(Math.random()<t){const t=Math.floor(Math.random()*this.length),s=this.bits[e];this.bits[e]=this.bits[t],this.bits[t]=s}}mutate(t=1/this.length,e){if("number"==typeof e)switch(e){case i.MutationMethod.FLIP:this.mutate_flip(t);break;case i.MutationMethod.SWAP:this.mutate_swap(t)}else this.setBits(e(this.getGenes()))}crossover_single_point(t){const e=[],s=[],i=Math.floor(Math.random()*this.length);for(let o=0;o<this.length;o++)e.push(o<i?this.bits[o]:t.bits[o]),s.push(o<i?t.bits[o]:this.bits[o]);return{baby1:e,baby2:s}}crossover_two_point(t){const e=[],s=[];let i=Math.floor(Math.random()*this.length),o=Math.floor(Math.random()*this.length);if(i>o){const t=o;o=i,i=t}for(let n=0;n<this.length;n++)e.push(n<i?this.bits[n]:n<o?t.bits[n]:this.bits[n]),s.push(n<i?t.bits[n]:n<o?this.bits[n]:t.bits[n]);return{baby1:e,baby2:s}}crossover_uniform(t){const e=[],s=[];for(let i=0;i<this.length;i++){let o=Math.random()<.5;e.push(o?t.bits[i]:this.bits[i]),s.push(o?this.bits[i]:t.bits[i])}return{baby1:e,baby2:s}}crossover_half_uniform(t){let e=[],s=[],i=[];for(let e=0;e<this.length;e++)this.bits[e]!==t.bits[e]&&i.push(e);let o=i.length;e=this.bits.slice(),s=t.bits.slice();for(let n=0;n<o/2;n++){let o=Math.floor(Math.random()*i.length);e[i[o]]=t.bits[i[o]],s[i[o]]=this.bits[i[o]],i.splice(o,1)}return{baby1:e,baby2:s}}crossover_ordered(t){const e=[],s=[];let i=Math.floor(Math.random()*this.length),o=Math.floor(Math.random()*this.length),n=i;i=Math.min(i,o),o=Math.max(n,o);for(let n=i;n<o;n++)e[n]=i<=n&&n<=o?t.bits[n]:void 0,s[n]=i<=n&&n<=o?this.bits[n]:void 0;for(let i=0;i<this.length;i++){if(-1===e.indexOf(this.bits[i]))e[i]=this.bits[i];else for(let t=0;t<this.length;t++)-1===e.indexOf(this.bits[t])&&(e[i]=this.bits[t]);if(-1===s.indexOf(t.bits[i]))s[i]=t.bits[i];else for(let e=0;e<this.length;e++)-1===s.indexOf(t.bits[e])&&(s[i]=t.bits[e])}return{baby1:e,baby2:s}}crossover(t,e){if("number"==typeof e)switch(e){case o.CrossoverMethod.SINGLE_POINT:return this.crossover_single_point(t);case o.CrossoverMethod.TWO_POINT:return this.crossover_two_point(t);case o.CrossoverMethod.UNIFORM:return this.crossover_uniform(t);case o.CrossoverMethod.HALF_UNIFORM:return this.crossover_half_uniform(t);case o.CrossoverMethod.ORDERED:return this.crossover_ordered(t);default:throw new Error(`Unimplemented CrossoverMethod: ${e} (${o.CrossoverMethod[e]})`)}return e(t)}setBits(t){this.bits=[...t]}getGenes(){return this.bits}copy(t){this.bits=t.bits.slice(),this.rand_func=t.rand_func,this.fitness=t.fitness}clone(){let t=new r(this.length,this.rand_func);return t.copy(this),t}}e.Chromosome=r},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.EventEmitter=class{constructor(){}on(t,e){void 0===this.handlers&&(this.handlers=new Map),this.handlers.has(t)?this.handlers.get(t).push(e):this.handlers.set(t,[e])}emit(t,e){if(void 0!==this.handlers&&this.handlers.has(t))for(const s of this.handlers.get(t))s.call(this,e)}bindEvent(t,e){t.on(e,t=>this.emit(e,t))}}},function(t,e,s){"use strict";function i(t,e=0,s=t.length-1){const n=t[Math.floor((e+s)/2)].getFitness();if(e<s){const r=o(t,e,s,n);i(t,e,r-1),i(t,r,s)}}function o(t,e,s,i){for(;e<=s;){for(;t[e].getFitness()>i;)e++;for(;t[s].getFitness()<i;)s--;e<=s&&([t[e],t[s]]=[t[s],t[e]],e++,s--)}return e}Object.defineProperty(e,"__esModule",{value:!0}),e.selectKBest=function(t,e){return function(t,e,s=0,n=t.length-1){const r=t[Math.floor((s+n)/2)].getFitness();if(s<n){const h=o(t,s,n,r);i(t,s,h-1),h<e&&i(t,h,n)}}(t,e),t.slice(0,e)}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.TSP=class{constructor(t){this.cities=t,this.dist_map=new Map}dist2D(t,e){return Math.pow(this.dist2D_squared(t,e),.5)}dist2D_squared(t,e){let s,i;e>t?(s=t,i=e):(s=e,i=t);const o=`${s}->${i}`;if(this.dist_map.has(o))return this.dist_map.get(o);{let s=this.cities[t],i=this.cities[e];const n=Math.pow(s.x-i.x,2)+Math.pow(s.y-i.y,2);return this.dist_map.set(o,n),n}}checkPathValidity(t){if(t.length!==this.cities.length)return!1;let e=t.slice().sort(),s=e[0];for(let t=1;t<e.length;t++){if(s===e[t])return!1;s=e[t]}return!0}distance(t){if(!this.checkPathValidity(t))throw new Error("Invalid path: Each city must be visited exactly once.");let e=0;for(let s=1;s<t.length;s++)e+=this.dist2D(t[s-1],t[s]);return e}distance_squared(t){if(!this.checkPathValidity(t))throw new Error("Invalid path: Each city must be visited exactly once.");let e=0;for(let s=1;s<t.length;s++)e+=this.dist2D_squared(t[s-1],t[s]);return e}getCities(){return this.cities}getCity(t){return this.cities[t]}draw(t,e){if(e.length!==this.cities.length)throw new Error("Each city must be visited");t.clearRect(0,0,t.canvas.width,t.canvas.height);const s=window.devicePixelRatio;t.strokeStyle="#555555",t.lineWidth=2;for(let i=1;i<e.length;i++)t.beginPath(),t.moveTo(this.cities[e[i-1]].x/s,this.cities[e[i-1]].y/s),t.lineTo(this.cities[e[i]].x/s,this.cities[e[i]].y/s),t.closePath(),t.stroke();t.fillStyle="#01cc33";for(const e of this.cities)t.beginPath(),t.arc(e.x/s,e.y/s,4,0,2*Math.PI),t.closePath(),t.fill()}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shuffle=function(t){const e=[...t];for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL011dGF0aW9uTWV0aG9kLnRzIiwid2VicGFjazovLy8uL3NyYy9Dcm9zc292ZXJNZXRob2RzLnRzIiwid2VicGFjazovLy8uL3NyYy9EZW1vcy9UcmF2ZWxpbmdTYWxlc21hbi9NYWluLnRzIiwid2VicGFjazovLy8uL3NyYy9EZW1vcy9UcmF2ZWxpbmdTYWxlc21hbi9UU1BfT3B0aW1pemVyLnRzIiwid2VicGFjazovLy8uL3NyYy9EYXJ3aW4udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0Nocm9tb3NvbWUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0V2ZW50RW1pdHRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVXRpbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0RlbW9zL1RyYXZlbGluZ1NhbGVzbWFuL1RTUC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvRGVtb3MvVHJhdmVsaW5nU2FsZXNtYW4vVXRpbHMudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJNdXRhdGlvbk1ldGhvZCIsIkNyb3Nzb3Zlck1ldGhvZCIsIlRTUF9PcHRpbWl6ZXJfMSIsImNudiIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImN0eCIsImdldENvbnRleHQiLCJkcHIiLCJ3aW5kb3ciLCJkZXZpY2VQaXhlbFJhdGlvIiwid2lkdGgiLCJpbm5lcldpZHRoIiwiaGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJzdHlsZSIsInNjYWxlIiwiYm9keSIsInBhZGRpbmciLCJtYXJnaW4iLCJhcHBlbmRDaGlsZCIsImNpdGllcyIsInB1c2giLCJ4IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwieSIsInRzcF9vcHQiLCJUU1BfT3B0aW1pemVyIiwib3B0aW1pemVyIiwib3B0aW1pemUiLCJ1cGRhdGUiLCJkYXRhIiwibmV4dCIsImRyYXdTaG9ydGVzdFBhdGgiLCJkb25lIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiRGFyd2luXzEiLCJNdXRhdGlvbk1ldGhvZF8xIiwiVFNQXzEiLCJDcm9zc292ZXJNZXRob2RzXzEiLCJVdGlsc18xIiwiW29iamVjdCBPYmplY3RdIiwidGhpcyIsInNodWZmbGVkIiwibW9kZWwiLCJjb252ZXJnZW5jZV90cmVzaG9sZCIsIm1heF9nZW5lcmF0aW9uIiwiZml0bmVzc19rIiwiQ0lUWV9DT1VOVCIsImxlbmd0aCIsInRzcCIsIlRTUCIsImdlbmV0aWNzIiwiRGFyd2luIiwicG9wdWxhdGlvbl9zaXplIiwiY2hyb21vc29tZV9sZW5ndGgiLCJyYW5kX2Z1bmMiLCJzaHVmZmxlIiwicG9wIiwiY3Jvc3NvdmVyX21ldGhvZCIsIk9SREVSRUQiLCJtdXRhdGlvbl9tZXRob2QiLCJTV0FQIiwiZWxpdGVfY291bnQiLCJyZWN0X3ciLCJyZWR1Y2UiLCJhIiwiYiIsInJlY3RfaCIsInciLCJoIiwidzIiLCJwb3ciLCJ3MyIsImgyIiwiaDMiLCJsb2ciLCJhdmdfZGlzdF9yZWN0IiwiYmVzdF9wYXRoIiwiZ2V0Rml0dGVzdCIsImdldEdlbmVzIiwicGF0aCIsImRpc3RhbmNlIiwiZml0bmVzcyIsImxvZzIiLCJ1cGRhdGVGaXRuZXNzIiwicGF0aEZpdG5lc3MiLCJtYXRlIiwibWluX2Rpc3QiLCJJbmZpbml0eSIsImNvdW50IiwiZ2V0R2VuZXJhdGlvbiIsIm5ld0dlbiIsImZpdHRlc3QiLCJkaXN0IiwiZGlzdGFuY2Vfc3F1YXJlZCIsImRyYXciLCJmaWxsU3R5bGUiLCJmaWxsVGV4dCIsImRpc3RhbmNlRnJvbUZpdG5lc3MiLCJnZXRBdmVyYWdlRml0bmVzcyIsInRvRml4ZWQiLCJDaHJvbW9zb21lXzEiLCJwYXJhbXMiLCJwb3B1bGF0aW9uIiwiZ2VuZXJhdGlvbiIsIm9uX2ZpdG5lc3NfdXBkYXRlIiwic3RhdHMiLCJuZWVkc191cGRhdGUiLCJjaHJvbW8iLCJDaHJvbW9zb21lIiwib24iLCJhc3NpZ24iLCJjcm9zc292ZXJfcmF0ZSIsIm11dGF0aW9uX3JhdGUiLCJTSU5HTEVfUE9JTlQiLCJGTElQIiwiZWxpdGVfY29waWVzIiwiYXZnX2ZpdG5lc3MiLCJzdW1fZml0bmVzcyIsImZpdHRlc3RfaWR4IiwibmV3X3BvcCIsImVsaXRlIiwiZ2V0VG9wQ2hyb21vc29tZXMiLCJqIiwiY2xvbmUiLCJtdW0iLCJnZXRSYW5kb21DaHJvbW9zb21lIiwiZGFkIiwiYmFiaWVzIiwiY3Jvc3NvdmVyIiwiYmFieTEiLCJiYWJ5MiIsIm11dGF0ZSIsImZpdG5lc3NfZXZhbHVhdG9yIiwic2V0Rml0bmVzcyIsImR1cGxpY2F0ZUVsaXRlIiwidXBkYXRlU3RhdHMiLCJpZHgiLCJhY2NfZml0bmVzcyIsImdldEZpdG5lc3MiLCJzZWxlY3RLQmVzdCIsImZvcmNlX3VwZGF0ZSIsIm1heF9maXRuZXNzIiwiRXZlbnRFbWl0dGVyXzEiLCJFdmVudEVtaXR0ZXIiLCJsZW5ndGhfb3JfYml0cyIsInN1cGVyIiwiYml0cyIsImYiLCJlbWl0IiwiYm9iIiwibWluIiwibXV0X3JhdGUiLCJ0bXAiLCJtZXRob2QiLCJtdXRhdGVfZmxpcCIsIm11dGF0ZV9zd2FwIiwic2V0Qml0cyIsImIxIiwiYjIiLCJwMSIsInAyIiwic3dhcCIsImRpZmZfYml0cyIsIk4iLCJzbGljZSIsInNwbGljZSIsImluZiIsInN1cCIsIm1heCIsInVuZGVmaW5lZCIsImluZGV4T2YiLCJjcm9zc292ZXJfc2luZ2xlX3BvaW50IiwiVFdPX1BPSU5UIiwiY3Jvc3NvdmVyX3R3b19wb2ludCIsIlVOSUZPUk0iLCJjcm9zc292ZXJfdW5pZm9ybSIsIkhBTEZfVU5JRk9STSIsImNyb3Nzb3Zlcl9oYWxmX3VuaWZvcm0iLCJjcm9zc292ZXJfb3JkZXJlZCIsIkVycm9yIiwiY29weSIsImV2IiwiaGFuZGxlciIsImhhbmRsZXJzIiwiTWFwIiwiaGFzIiwic2V0IiwiZW0iLCJfcXVpY2tzb3J0IiwiYXJyIiwiZnJvbSIsInRvIiwicGl2b3QiLCJwYXJ0aXRpb24iLCJhcnJheSIsImxlZnQiLCJyaWdodCIsImsiLCJyZXZlcnNlX3BhcnRpYWxfcXVpY2tzb3J0IiwiZGlzdF9tYXAiLCJjaXR5QSIsImNpdHlCIiwiZGlzdDJEX3NxdWFyZWQiLCJjaXR5MSIsImNpdHkyIiwiZGlzdF9zcSIsInNvcnRlZCIsInNvcnQiLCJwcmV2IiwiY2hlY2tQYXRoVmFsaWRpdHkiLCJkaXN0MkQiLCJjbGVhclJlY3QiLCJjYW52YXMiLCJzdHJva2VTdHlsZSIsImxpbmVXaWR0aCIsImJlZ2luUGF0aCIsIm1vdmVUbyIsImxpbmVUbyIsImNsb3NlUGF0aCIsInN0cm9rZSIsImNpdHkiLCJhcmMiLCJQSSIsImZpbGwiLCJzd2FwX2lkeCJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxJQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFlBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVB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QXdOLFlBQ0F4TixFQUFBNk4sdUNDekZBelAsT0FBQUMsZUFBQWIsRUFBQSxjQUE4Q21CLE9BQUEsSUFTOUNuQixFQUFBNkYsUUFSQSxTQUFBMkksR0FDQSxNQUFBTCxNQUFBSyxHQUNBLFFBQUF0TyxFQUFBaU8sRUFBQTlJLE9BQUEsRUFBZ0NuRixFQUFBLEVBQU9BLElBQUEsQ0FDdkMsTUFBQW9RLEVBQUE1TSxLQUFBQyxNQUFBRCxLQUFBRSxVQUFBMUQsRUFBQSxLQUNBaU8sRUFBQWpPLEdBQUFpTyxFQUFBbUMsS0FBQW5DLEVBQUFtQyxHQUFBbkMsRUFBQWpPLElBRUEsT0FBQWlPIiwiZmlsZSI6InRzcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAyKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIE11dGF0aW9uTWV0aG9kO1xuKGZ1bmN0aW9uIChNdXRhdGlvbk1ldGhvZCkge1xuICAgIE11dGF0aW9uTWV0aG9kW011dGF0aW9uTWV0aG9kW1wiRkxJUFwiXSA9IDBdID0gXCJGTElQXCI7XG4gICAgTXV0YXRpb25NZXRob2RbTXV0YXRpb25NZXRob2RbXCJTV0FQXCJdID0gMV0gPSBcIlNXQVBcIjtcbn0pKE11dGF0aW9uTWV0aG9kID0gZXhwb3J0cy5NdXRhdGlvbk1ldGhvZCB8fCAoZXhwb3J0cy5NdXRhdGlvbk1ldGhvZCA9IHt9KSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBDcm9zc292ZXJNZXRob2Q7XG4oZnVuY3Rpb24gKENyb3Nzb3Zlck1ldGhvZCkge1xuICAgIENyb3Nzb3Zlck1ldGhvZFtDcm9zc292ZXJNZXRob2RbXCJTSU5HTEVfUE9JTlRcIl0gPSAwXSA9IFwiU0lOR0xFX1BPSU5UXCI7XG4gICAgQ3Jvc3NvdmVyTWV0aG9kW0Nyb3Nzb3Zlck1ldGhvZFtcIlRXT19QT0lOVFwiXSA9IDFdID0gXCJUV09fUE9JTlRcIjtcbiAgICBDcm9zc292ZXJNZXRob2RbQ3Jvc3NvdmVyTWV0aG9kW1wiVU5JRk9STVwiXSA9IDJdID0gXCJVTklGT1JNXCI7XG4gICAgQ3Jvc3NvdmVyTWV0aG9kW0Nyb3Nzb3Zlck1ldGhvZFtcIkhBTEZfVU5JRk9STVwiXSA9IDNdID0gXCJIQUxGX1VOSUZPUk1cIjtcbiAgICBDcm9zc292ZXJNZXRob2RbQ3Jvc3NvdmVyTWV0aG9kW1wiT1JERVJFRFwiXSA9IDRdID0gXCJPUkRFUkVEXCI7XG59KShDcm9zc292ZXJNZXRob2QgPSBleHBvcnRzLkNyb3Nzb3Zlck1ldGhvZCB8fCAoZXhwb3J0cy5Dcm9zc292ZXJNZXRob2QgPSB7fSkpO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jb25zdCBUU1BfT3B0aW1pemVyXzEgPSByZXF1aXJlKFwiLi9UU1BfT3B0aW1pemVyXCIpO1xuY29uc3QgY252ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG5jb25zdCBjdHggPSBjbnYuZ2V0Q29udGV4dCgnMmQnKTtcbmNvbnN0IGRwciA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuY252LndpZHRoID0gd2luZG93LmlubmVyV2lkdGggKiBkcHI7XG5jbnYuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0ICogZHByO1xuY252LnN0eWxlLndpZHRoID0gYCR7d2luZG93LmlubmVyV2lkdGh9cHhgO1xuY252LnN0eWxlLmhlaWdodCA9IGAke3dpbmRvdy5pbm5lckhlaWdodH1weGA7XG5jdHguc2NhbGUoZHByLCBkcHIpO1xuZG9jdW1lbnQuYm9keS5zdHlsZS5wYWRkaW5nID0gJzAnO1xuZG9jdW1lbnQuYm9keS5zdHlsZS5tYXJnaW4gPSAnMCc7XG5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNudik7XG5jb25zdCBjaXRpZXMgPSBbXTtcbmZvciAobGV0IGkgPSAwOyBpIDwgNDA7IGkrKykge1xuICAgIGNpdGllcy5wdXNoKHtcbiAgICAgICAgeDogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY252LndpZHRoKSxcbiAgICAgICAgeTogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY252LmhlaWdodClcbiAgICB9KTtcbn1cbmNvbnN0IHRzcF9vcHQgPSBuZXcgVFNQX09wdGltaXplcl8xLlRTUF9PcHRpbWl6ZXIoY2l0aWVzKTtcbmNvbnN0IG9wdGltaXplciA9IHRzcF9vcHQub3B0aW1pemUoKTtcbmNvbnN0IHVwZGF0ZSA9ICgpID0+IHtcbiAgICBjb25zdCBkYXRhID0gb3B0aW1pemVyLm5leHQoKTtcbiAgICB0c3Bfb3B0LmRyYXdTaG9ydGVzdFBhdGgoY3R4KTtcbiAgICBpZiAoIWRhdGEuZG9uZSkge1xuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodXBkYXRlKTtcbiAgICB9XG59O1xudXBkYXRlKCk7XG50c3Bfb3B0LmRyYXdTaG9ydGVzdFBhdGgoY3R4KTtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgRGFyd2luXzEgPSByZXF1aXJlKFwiLi4vLi4vRGFyd2luXCIpO1xuY29uc3QgTXV0YXRpb25NZXRob2RfMSA9IHJlcXVpcmUoXCIuLi8uLi9NdXRhdGlvbk1ldGhvZFwiKTtcbmNvbnN0IFRTUF8xID0gcmVxdWlyZShcIi4vVFNQXCIpO1xuY29uc3QgQ3Jvc3NvdmVyTWV0aG9kc18xID0gcmVxdWlyZShcIi4uLy4uL0Nyb3Nzb3Zlck1ldGhvZHNcIik7XG5jb25zdCBVdGlsc18xID0gcmVxdWlyZShcIi4vVXRpbHNcIik7XG5jbGFzcyBUU1BfT3B0aW1pemVyIHtcbiAgICBjb25zdHJ1Y3RvcihjaXRpZXMgPSBbXSkge1xuICAgICAgICB0aGlzLnNodWZmbGVkID0gW107XG4gICAgICAgIHRoaXMubW9kZWwgPSBbXTtcbiAgICAgICAgdGhpcy5jb252ZXJnZW5jZV90cmVzaG9sZCA9IDMwO1xuICAgICAgICB0aGlzLm1heF9nZW5lcmF0aW9uID0gNTAwMDtcbiAgICAgICAgdGhpcy5maXRuZXNzX2sgPSAxNTtcbiAgICAgICAgdGhpcy5DSVRZX0NPVU5UID0gY2l0aWVzLmxlbmd0aDtcbiAgICAgICAgdGhpcy50c3AgPSBuZXcgVFNQXzEuVFNQKGNpdGllcyk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5DSVRZX0NPVU5UOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMubW9kZWxbaV0gPSBpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZ2VuZXRpY3MgPSBuZXcgRGFyd2luXzEuRGFyd2luKHtcbiAgICAgICAgICAgIHBvcHVsYXRpb25fc2l6ZTogNTAwLFxuICAgICAgICAgICAgY2hyb21vc29tZV9sZW5ndGg6IHRoaXMuQ0lUWV9DT1VOVCxcbiAgICAgICAgICAgIHJhbmRfZnVuYzogKCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaHVmZmxlZC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaHVmZmxlZCA9IFV0aWxzXzEuc2h1ZmZsZSh0aGlzLm1vZGVsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2h1ZmZsZWQucG9wKCk7XG4gICAgICAgICAgICB9KS5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgY3Jvc3NvdmVyX21ldGhvZDogQ3Jvc3NvdmVyTWV0aG9kc18xLkNyb3Nzb3Zlck1ldGhvZC5PUkRFUkVELFxuICAgICAgICAgICAgbXV0YXRpb25fbWV0aG9kOiBNdXRhdGlvbk1ldGhvZF8xLk11dGF0aW9uTWV0aG9kLlNXQVAsXG4gICAgICAgICAgICBlbGl0ZV9jb3VudDogNVxuICAgICAgICB9KTtcbiAgICAgICAgbGV0IHJlY3RfdyA9IGNpdGllcy5yZWR1Y2UoKGEsIGIpID0+IGEgPiBiLnggPyBhIDogYi54LCAwKSwgcmVjdF9oID0gY2l0aWVzLnJlZHVjZSgoYSwgYikgPT4gYSA+IGIueSA/IGEgOiBiLnksIDApO1xuICAgICAgICB0aGlzLmZpdG5lc3NfayAqPSBhdmdfZGlzdF9yZWN0KHJlY3RfdywgcmVjdF9oKSAqIHRoaXMuQ0lUWV9DT1VOVDtcbiAgICAgICAgdGhpcy5iZXN0X3BhdGggPSB0aGlzLmdlbmV0aWNzLmdldEZpdHRlc3QoKS5nZXRHZW5lcygpO1xuICAgIH1cbiAgICBwYXRoRml0bmVzcyhwYXRoKSB7XG4gICAgICAgIHJldHVybiBNYXRoLnBvdygyLCAodGhpcy5maXRuZXNzX2sgLyB0aGlzLnRzcC5kaXN0YW5jZShwYXRoKSkpO1xuICAgIH1cbiAgICBkaXN0YW5jZUZyb21GaXRuZXNzKGZpdG5lc3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZml0bmVzc19rIC8gTWF0aC5sb2cyKGZpdG5lc3MpO1xuICAgIH1cbiAgICBuZXdHZW4oKSB7XG4gICAgICAgIHRoaXMuZ2VuZXRpY3MudXBkYXRlRml0bmVzcyhwYXRoID0+IHRoaXMucGF0aEZpdG5lc3MocGF0aCkpO1xuICAgICAgICB0aGlzLmdlbmV0aWNzLm1hdGUoKTtcbiAgICB9XG4gICAgKm9wdGltaXplKCkge1xuICAgICAgICBsZXQgbWluX2Rpc3QgPSBJbmZpbml0eSwgY291bnQgPSAwO1xuICAgICAgICB3aGlsZSAodGhpcy5nZW5ldGljcy5nZXRHZW5lcmF0aW9uKCkgIT09IHRoaXMubWF4X2dlbmVyYXRpb24gJiYgY291bnQgIT09IHRoaXMuY29udmVyZ2VuY2VfdHJlc2hvbGQpIHtcbiAgICAgICAgICAgIHRoaXMubmV3R2VuKCk7XG4gICAgICAgICAgICBjb25zdCBmaXR0ZXN0ID0gdGhpcy5nZW5ldGljcy5nZXRGaXR0ZXN0KCk7XG4gICAgICAgICAgICBjb25zdCBkaXN0ID0gdGhpcy50c3AuZGlzdGFuY2Vfc3F1YXJlZChmaXR0ZXN0LmdldEdlbmVzKCkpOyAvLyB0aGlzLmRpc3RhbmNlRnJvbUZpdG5lc3MoZml0dGVzdC5nZXRGaXRuZXNzKCkpO1xuICAgICAgICAgICAgaWYgKGRpc3QgPj0gbWluX2Rpc3QpIHtcbiAgICAgICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbWluX2Rpc3QgPSBkaXN0O1xuICAgICAgICAgICAgICAgIHRoaXMuYmVzdF9wYXRoID0gWy4uLmZpdHRlc3QuZ2V0R2VuZXMoKV07XG4gICAgICAgICAgICAgICAgY291bnQgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeWllbGQgdGhpcy5iZXN0X3BhdGg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuYmVzdF9wYXRoO1xuICAgIH1cbiAgICBkcmF3U2hvcnRlc3RQYXRoKGN0eCkge1xuICAgICAgICB0aGlzLnRzcC5kcmF3KGN0eCwgdGhpcy5iZXN0X3BhdGgpO1xuICAgICAgICBjdHguZmlsbFN0eWxlID0gJ2JsYWNrJztcbiAgICAgICAgY3R4LmZpbGxUZXh0KGBnZW5lcmF0aW9uIDogJHt0aGlzLmdlbmV0aWNzLmdldEdlbmVyYXRpb24oKX1gLCA1LCAxNSk7XG4gICAgICAgIGN0eC5maWxsVGV4dChgYXZnIGRpc3QgOiAke3RoaXMuZGlzdGFuY2VGcm9tRml0bmVzcyh0aGlzLmdlbmV0aWNzLmdldEF2ZXJhZ2VGaXRuZXNzKCkpLnRvRml4ZWQoMCl9YCwgNSwgMzApO1xuICAgIH1cbiAgICBnZXRHZW5lcmF0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZW5ldGljcy5nZXRHZW5lcmF0aW9uKCk7XG4gICAgfVxufVxuZXhwb3J0cy5UU1BfT3B0aW1pemVyID0gVFNQX09wdGltaXplcjtcbi8vaHR0cDovL3d3dy5tYXRoLnVuaS1tdWVuc3Rlci5kZS9yZWluZS91L2J1cmdzdGFsL2QxOC5wZGZcbmZ1bmN0aW9uIGF2Z19kaXN0X3JlY3QodywgaCkge1xuICAgIGNvbnN0IHcyID0gTWF0aC5wb3codywgMik7XG4gICAgY29uc3QgdzMgPSBNYXRoLnBvdyh3LCAzKTtcbiAgICBjb25zdCBoMiA9IE1hdGgucG93KGgsIDIpO1xuICAgIGNvbnN0IGgzID0gTWF0aC5wb3coaCwgMyk7XG4gICAgY29uc3QgZCA9IE1hdGgucG93KCh3MiArIGgyKSwgMC41KTtcbiAgICByZXR1cm4gKDEgLyAxNSkgKiAodzMgLyBoMiArIGgzIC8gdzIgKyBkICpcbiAgICAgICAgKDMgLSB3MiAvIGgyIC0gaDIgLyB3MikgKyAyLjUgKiAoKGgyIC8gdykgKlxuICAgICAgICBNYXRoLmxvZygodyArIGQpIC8gaCkgKyAodzIgLyBoKSAqIE1hdGgubG9nKChoICsgZCkgLyB3KSkpO1xufVxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jb25zdCBDaHJvbW9zb21lXzEgPSByZXF1aXJlKFwiLi9DaHJvbW9zb21lXCIpO1xuY29uc3QgQ3Jvc3NvdmVyTWV0aG9kc18xID0gcmVxdWlyZShcIi4vQ3Jvc3NvdmVyTWV0aG9kc1wiKTtcbmNvbnN0IE11dGF0aW9uTWV0aG9kXzEgPSByZXF1aXJlKFwiLi9NdXRhdGlvbk1ldGhvZFwiKTtcbmNvbnN0IFV0aWxzXzEgPSByZXF1aXJlKFwiLi9VdGlsc1wiKTtcbmNsYXNzIERhcndpbiB7XG4gICAgY29uc3RydWN0b3IocGFyYW1zKSB7XG4gICAgICAgIHRoaXMucG9wdWxhdGlvbiA9IFtdO1xuICAgICAgICB0aGlzLmdlbmVyYXRpb24gPSAwO1xuICAgICAgICBjb25zdCBvbl9maXRuZXNzX3VwZGF0ZSA9ICgpID0+IHsgdGhpcy5zdGF0cy5uZWVkc191cGRhdGUgPSB0cnVlOyB9O1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcmFtcy5wb3B1bGF0aW9uX3NpemU7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgY2hyb21vID0gbmV3IENocm9tb3NvbWVfMS5DaHJvbW9zb21lKHBhcmFtcy5jaHJvbW9zb21lX2xlbmd0aCwgcGFyYW1zLnJhbmRfZnVuYyk7XG4gICAgICAgICAgICBjaHJvbW8ub24oJ3VwZGF0ZV9maXRuZXNzJywgb25fZml0bmVzc191cGRhdGUpO1xuICAgICAgICAgICAgdGhpcy5wb3B1bGF0aW9uLnB1c2goY2hyb21vKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBhcmFtcyA9IE9iamVjdC5hc3NpZ24oeyBjcm9zc292ZXJfcmF0ZTogMC43LCBtdXRhdGlvbl9yYXRlOiAxIC8gcGFyYW1zLmNocm9tb3NvbWVfbGVuZ3RoLCBjcm9zc292ZXJfbWV0aG9kOiBDcm9zc292ZXJNZXRob2RzXzEuQ3Jvc3NvdmVyTWV0aG9kLlNJTkdMRV9QT0lOVCwgbXV0YXRpb25fbWV0aG9kOiBNdXRhdGlvbk1ldGhvZF8xLk11dGF0aW9uTWV0aG9kLkZMSVAsIGVsaXRlX2NvdW50OiAxLCBlbGl0ZV9jb3BpZXM6IDEgfSwgcGFyYW1zKTtcbiAgICAgICAgdGhpcy5zdGF0cyA9IHtcbiAgICAgICAgICAgIGZpdHRlc3Q6IHRoaXMucG9wdWxhdGlvblswXSxcbiAgICAgICAgICAgIGF2Z19maXRuZXNzOiAwLFxuICAgICAgICAgICAgc3VtX2ZpdG5lc3M6IDAsXG4gICAgICAgICAgICBmaXR0ZXN0X2lkeDogMCxcbiAgICAgICAgICAgIG5lZWRzX3VwZGF0ZTogdHJ1ZVxuICAgICAgICB9O1xuICAgIH1cbiAgICBkdXBsaWNhdGVFbGl0ZShuZXdfcG9wKSB7XG4gICAgICAgIC8vIEVMSVRJU00gaS5lLiBrZWVwaW5nIHRoZSBmaXR0ZXN0IENocm9tb3NvbWVzXG4gICAgICAgIGlmICh0aGlzLnBhcmFtcy5lbGl0ZV9jb3VudCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGVsaXRlID0gdGhpcy5nZXRUb3BDaHJvbW9zb21lcyh0aGlzLnBhcmFtcy5lbGl0ZV9jb3VudCk7XG4gICAgICAgICAgICAvLyBLZWVwIHRoZSBmaXR0ZXN0IENocm9tb3NvbWVzXG4gICAgICAgICAgICBuZXdfcG9wLnB1c2goLi4uZWxpdGUpO1xuICAgICAgICAgICAgLy8gRHVwbGljYXRlIHRoZSBlbGl0ZVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnBhcmFtcy5lbGl0ZV9jb3VudDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLnBhcmFtcy5lbGl0ZV9jb3BpZXM7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBuZXdfcG9wLnB1c2goZWxpdGVbaV0uY2xvbmUoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNyb3Nzb3ZlcihuZXdfcG9wKSB7XG4gICAgICAgIHdoaWxlIChuZXdfcG9wLmxlbmd0aCA8IHRoaXMucGFyYW1zLnBvcHVsYXRpb25fc2l6ZSkge1xuICAgICAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCB0aGlzLnBhcmFtcy5jcm9zc292ZXJfcmF0ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG11bSA9IHRoaXMuZ2V0UmFuZG9tQ2hyb21vc29tZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhZCA9IHRoaXMuZ2V0UmFuZG9tQ2hyb21vc29tZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJhYmllcyA9IG11bS5jcm9zc292ZXIoZGFkLCB0aGlzLnBhcmFtcy5jcm9zc292ZXJfbWV0aG9kKTtcbiAgICAgICAgICAgICAgICBjb25zdCBiYWJ5MSA9IG5ldyBDaHJvbW9zb21lXzEuQ2hyb21vc29tZShiYWJpZXMuYmFieTEsIHRoaXMucGFyYW1zLnJhbmRfZnVuYyk7XG4gICAgICAgICAgICAgICAgY29uc3QgYmFieTIgPSBuZXcgQ2hyb21vc29tZV8xLkNocm9tb3NvbWUoYmFiaWVzLmJhYnkyLCB0aGlzLnBhcmFtcy5yYW5kX2Z1bmMpO1xuICAgICAgICAgICAgICAgIG5ld19wb3AucHVzaChiYWJ5MSwgYmFieTIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEJlY2F1c2Ugd2UgYWRkIHR3byBjaHJvbW9zb21lcyBwZXIgbG9vcFxuICAgICAgICAvLyBpZiBwb3B1bGF0aW9uX3NpemUgaXMgb2RkXG4gICAgICAgIGlmICh0aGlzLnBhcmFtcy5wb3B1bGF0aW9uX3NpemUgJSAyID09PSAxKSB7XG4gICAgICAgICAgICBuZXdfcG9wLnBvcCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG11dGF0ZShuZXdfcG9wKSB7XG4gICAgICAgIGZvciAoY29uc3QgYyBvZiBuZXdfcG9wKSB7XG4gICAgICAgICAgICBjLm11dGF0ZSh0aGlzLnBhcmFtcy5tdXRhdGlvbl9yYXRlLCB0aGlzLnBhcmFtcy5tdXRhdGlvbl9tZXRob2QpO1xuICAgICAgICAgICAgLy8gYy5zZXRGaXRuZXNzKDApOyAvLyByZXNldCBmaXRuZXNzXG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlRml0bmVzcyhmaXRuZXNzX2V2YWx1YXRvcikge1xuICAgICAgICBmb3IgKGNvbnN0IGNocm9tbyBvZiB0aGlzLnBvcHVsYXRpb24pIHtcbiAgICAgICAgICAgIGNocm9tby5zZXRGaXRuZXNzKGZpdG5lc3NfZXZhbHVhdG9yKGNocm9tby5nZXRHZW5lcygpKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGF0cy5uZWVkc191cGRhdGUgPSB0cnVlO1xuICAgIH1cbiAgICAvLyBnZW5lcmF0ZXMgdGhlIG5ldyBnZW5lcmF0aW9uXG4gICAgLy8gdGhlIGZpdG5lc3Mgb2YgZWFjaCBDaHJvbW9zb21lIG11c3QgYmUgdXBkYXRlZCBiZWZvcmUgY2FsbGluZyBtYXRlXG4gICAgbWF0ZSgpIHtcbiAgICAgICAgY29uc3QgbmV3X3BvcCA9IFtdO1xuICAgICAgICAvLyBFTElUSVNNXG4gICAgICAgIHRoaXMuZHVwbGljYXRlRWxpdGUobmV3X3BvcCk7XG4gICAgICAgIC8vIFJFUFJPRFVDVElPTlxuICAgICAgICB0aGlzLmNyb3Nzb3ZlcihuZXdfcG9wKTtcbiAgICAgICAgdGhpcy5tdXRhdGUobmV3X3BvcCk7XG4gICAgICAgIC8vIHVwdGF0ZSB0aGUgcG9wdWxhdGlvblxuICAgICAgICB0aGlzLnBvcHVsYXRpb24gPSBuZXdfcG9wO1xuICAgICAgICB0aGlzLmdlbmVyYXRpb24rKztcbiAgICAgICAgdGhpcy51cGRhdGVTdGF0cyh0cnVlKTtcbiAgICB9XG4gICAgLy8gR2V0dGVycyAmIFNldHRlcnNcbiAgICBnZXRQb3B1bGF0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3B1bGF0aW9uO1xuICAgIH1cbiAgICBnZXRDaHJvbW9zb21lKGlkeCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3B1bGF0aW9uW2lkeF07XG4gICAgfVxuICAgIGdldFJhbmRvbUNocm9tb3NvbWUoKSB7XG4gICAgICAgIHRoaXMudXBkYXRlU3RhdHMoKTtcbiAgICAgICAgaWYgKHRoaXMuc3RhdHMuc3VtX2ZpdG5lc3MgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBvcHVsYXRpb25bTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGhpcy5wb3B1bGF0aW9uLmxlbmd0aCldO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHIgPSBNYXRoLnJhbmRvbSgpICogdGhpcy5zdGF0cy5zdW1fZml0bmVzcztcbiAgICAgICAgbGV0IGFjY19maXRuZXNzID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnBvcHVsYXRpb24ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFjY19maXRuZXNzICs9IHRoaXMucG9wdWxhdGlvbltpXS5nZXRGaXRuZXNzKCk7XG4gICAgICAgICAgICBpZiAoYWNjX2ZpdG5lc3MgPiByKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9wdWxhdGlvbltpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyB0aGlzIHNob3VsZCBuZXZlciBoYXBwZW5kXG4gICAgICAgIHJldHVybiB0aGlzLnBvcHVsYXRpb25bMF07XG4gICAgfVxuICAgIGdldFRvcENocm9tb3NvbWVzKGNvdW50KSB7XG4gICAgICAgIC8vIHJldHVybiB0aGlzLnBvcHVsYXRpb24uc29ydCgoYSwgYikgPT4gYi5nZXRGaXRuZXNzKCkgLSBhLmdldEZpdG5lc3MoKSkuc2xpY2UoMCwgY291bnQpO1xuICAgICAgICByZXR1cm4gVXRpbHNfMS5zZWxlY3RLQmVzdCh0aGlzLnBvcHVsYXRpb24sIGNvdW50KTtcbiAgICB9XG4gICAgZ2V0QXZlcmFnZUZpdG5lc3MoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRzLm5lZWRzX3VwZGF0ZSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTdGF0cygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRzLmF2Z19maXRuZXNzO1xuICAgIH1cbiAgICBnZXRGaXR0ZXN0KCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0cy5uZWVkc191cGRhdGUpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU3RhdHMoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5zdGF0cy5maXR0ZXN0O1xuICAgIH1cbiAgICBnZXRQYXJhbXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmFtcztcbiAgICB9XG4gICAgZ2V0R2VuZXJhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGlvbjtcbiAgICB9XG4gICAgZ2V0U3RhdHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRzO1xuICAgIH1cbiAgICB1cGRhdGVTdGF0cyhmb3JjZV91cGRhdGUgPSBmYWxzZSkge1xuICAgICAgICBpZiAoZm9yY2VfdXBkYXRlIHx8IHRoaXMuc3RhdHMubmVlZHNfdXBkYXRlKSB7XG4gICAgICAgICAgICBsZXQgc3VtX2ZpdG5lc3MgPSAwO1xuICAgICAgICAgICAgbGV0IG1heF9maXRuZXNzID0gMDtcbiAgICAgICAgICAgIGxldCBmaXR0ZXN0X2lkeCA9IDA7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucG9wdWxhdGlvbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpdG5lc3MgPSB0aGlzLnBvcHVsYXRpb25baV0uZ2V0Rml0bmVzcygpO1xuICAgICAgICAgICAgICAgIHN1bV9maXRuZXNzICs9IGZpdG5lc3M7XG4gICAgICAgICAgICAgICAgaWYgKGZpdG5lc3MgPiBtYXhfZml0bmVzcykge1xuICAgICAgICAgICAgICAgICAgICBtYXhfZml0bmVzcyA9IGZpdG5lc3M7XG4gICAgICAgICAgICAgICAgICAgIGZpdHRlc3RfaWR4ID0gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN0YXRzLnN1bV9maXRuZXNzID0gc3VtX2ZpdG5lc3M7XG4gICAgICAgICAgICB0aGlzLnN0YXRzLmF2Z19maXRuZXNzID0gc3VtX2ZpdG5lc3MgLyB0aGlzLnBhcmFtcy5wb3B1bGF0aW9uX3NpemU7XG4gICAgICAgICAgICB0aGlzLnN0YXRzLmZpdHRlc3QgPSB0aGlzLnBvcHVsYXRpb25bZml0dGVzdF9pZHhdLmNsb25lKCk7XG4gICAgICAgICAgICB0aGlzLnN0YXRzLmZpdHRlc3RfaWR4ID0gZml0dGVzdF9pZHg7XG4gICAgICAgICAgICB0aGlzLnN0YXRzLm5lZWRzX3VwZGF0ZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5EYXJ3aW4gPSBEYXJ3aW47XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmNvbnN0IE11dGF0aW9uTWV0aG9kXzEgPSByZXF1aXJlKFwiLi9NdXRhdGlvbk1ldGhvZFwiKTtcbmNvbnN0IENyb3Nzb3Zlck1ldGhvZHNfMSA9IHJlcXVpcmUoXCIuL0Nyb3Nzb3Zlck1ldGhvZHNcIik7XG5jb25zdCBFdmVudEVtaXR0ZXJfMSA9IHJlcXVpcmUoXCIuL0V2ZW50RW1pdHRlclwiKTtcbmNsYXNzIENocm9tb3NvbWUgZXh0ZW5kcyBFdmVudEVtaXR0ZXJfMS5FdmVudEVtaXR0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGxlbmd0aF9vcl9iaXRzLCByYW5kX2Z1bmMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5iaXRzID0gW107XG4gICAgICAgIHRoaXMuZml0bmVzcyA9IDA7XG4gICAgICAgIHRoaXMucmFuZF9mdW5jID0gcmFuZF9mdW5jO1xuICAgICAgICBpZiAodHlwZW9mIGxlbmd0aF9vcl9iaXRzID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgdGhpcy5sZW5ndGggPSBsZW5ndGhfb3JfYml0cztcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuYml0cy5wdXNoKHJhbmRfZnVuYygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYml0cyA9IGxlbmd0aF9vcl9iaXRzO1xuICAgICAgICAgICAgdGhpcy5sZW5ndGggPSBsZW5ndGhfb3JfYml0cy5sZW5ndGg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0Rml0bmVzcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZml0bmVzcztcbiAgICB9XG4gICAgc2V0Rml0bmVzcyhmKSB7XG4gICAgICAgIHRoaXMuZml0bmVzcyA9IGY7XG4gICAgICAgIHRoaXMuZW1pdCgndXBkYXRlX2ZpdG5lc3MnLCBmKTtcbiAgICB9XG4gICAgLy8gcmV0dXJucyB0aGUgbnVtYmVyIG9mIGJpdHMgd2hpY2ggYXJlIGRpZmZlcmVudCA9IEhhbW1pbmcgZGlzdGFuY2VcbiAgICBjb21wYXJlKGJvYikge1xuICAgICAgICBsZXQgY291bnQgPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE1hdGgubWluKHRoaXMubGVuZ3RoLCBib2IubGVuZ3RoKTsgaSsrKSB7XG4gICAgICAgICAgICBjb3VudCArPSB0aGlzLmJpdHNbaV0gIT09IGJvYi5iaXRzW2ldID8gMSA6IDA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvdW50O1xuICAgIH1cbiAgICBtdXRhdGVfZmxpcChtdXRfcmF0ZSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgbXV0X3JhdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJpdHNbaV0gPSB0aGlzLnJhbmRfZnVuYygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIG11dGF0ZV9zd2FwKG11dF9yYXRlKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCBtdXRfcmF0ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGogPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0aGlzLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgY29uc3QgdG1wID0gdGhpcy5iaXRzW2ldO1xuICAgICAgICAgICAgICAgIHRoaXMuYml0c1tpXSA9IHRoaXMuYml0c1tqXTtcbiAgICAgICAgICAgICAgICB0aGlzLmJpdHNbal0gPSB0bXA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgbXV0YXRlKG11dF9yYXRlID0gMSAvIHRoaXMubGVuZ3RoLCBtZXRob2QpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBtZXRob2QgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKG1ldGhvZCkge1xuICAgICAgICAgICAgICAgIGNhc2UgTXV0YXRpb25NZXRob2RfMS5NdXRhdGlvbk1ldGhvZC5GTElQOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm11dGF0ZV9mbGlwKG11dF9yYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBNdXRhdGlvbk1ldGhvZF8xLk11dGF0aW9uTWV0aG9kLlNXQVA6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubXV0YXRlX3N3YXAobXV0X3JhdGUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2V0Qml0cyhtZXRob2QodGhpcy5nZXRHZW5lcygpKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY3Jvc3NvdmVyX3NpbmdsZV9wb2ludChib2IpIHtcbiAgICAgICAgY29uc3QgYjEgPSBbXTtcbiAgICAgICAgY29uc3QgYjIgPSBbXTtcbiAgICAgICAgY29uc3QgcCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMubGVuZ3RoKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBiMS5wdXNoKGkgPCBwID8gdGhpcy5iaXRzW2ldIDogYm9iLmJpdHNbaV0pO1xuICAgICAgICAgICAgYjIucHVzaChpIDwgcCA/IGJvYi5iaXRzW2ldIDogdGhpcy5iaXRzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBiYWJ5MTogYjEsIGJhYnkyOiBiMiB9O1xuICAgIH1cbiAgICBjcm9zc292ZXJfdHdvX3BvaW50KGJvYikge1xuICAgICAgICBjb25zdCBiMSA9IFtdO1xuICAgICAgICBjb25zdCBiMiA9IFtdO1xuICAgICAgICBsZXQgcDEgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0aGlzLmxlbmd0aCk7XG4gICAgICAgIGxldCBwMiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMubGVuZ3RoKTtcbiAgICAgICAgaWYgKHAxID4gcDIpIHtcbiAgICAgICAgICAgIGNvbnN0IGMgPSBwMjtcbiAgICAgICAgICAgIHAyID0gcDE7XG4gICAgICAgICAgICBwMSA9IGM7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBiMS5wdXNoKGkgPCBwMSA/IHRoaXMuYml0c1tpXSA6IChpIDwgcDIgPyBib2IuYml0c1tpXSA6IHRoaXMuYml0c1tpXSkpO1xuICAgICAgICAgICAgYjIucHVzaChpIDwgcDEgPyBib2IuYml0c1tpXSA6IChpIDwgcDIgPyB0aGlzLmJpdHNbaV0gOiBib2IuYml0c1tpXSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGJhYnkxOiBiMSwgYmFieTI6IGIyIH07XG4gICAgfVxuICAgIGNyb3Nzb3Zlcl91bmlmb3JtKGJvYikge1xuICAgICAgICBjb25zdCBiMSA9IFtdO1xuICAgICAgICBjb25zdCBiMiA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBzd2FwID0gTWF0aC5yYW5kb20oKSA8IDAuNTtcbiAgICAgICAgICAgIGIxLnB1c2goc3dhcCA/IGJvYi5iaXRzW2ldIDogdGhpcy5iaXRzW2ldKTtcbiAgICAgICAgICAgIGIyLnB1c2goc3dhcCA/IHRoaXMuYml0c1tpXSA6IGJvYi5iaXRzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBiYWJ5MTogYjEsIGJhYnkyOiBiMiB9O1xuICAgIH1cbiAgICBjcm9zc292ZXJfaGFsZl91bmlmb3JtKGJvYikge1xuICAgICAgICBsZXQgYjEgPSBbXTtcbiAgICAgICAgbGV0IGIyID0gW107XG4gICAgICAgIGxldCBkaWZmX2JpdHMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgaWYgKHRoaXMuYml0c1tpXSAhPT0gYm9iLmJpdHNbaV0pXG4gICAgICAgICAgICAgICAgZGlmZl9iaXRzLnB1c2goaSk7XG4gICAgICAgIGxldCBOID0gZGlmZl9iaXRzLmxlbmd0aDtcbiAgICAgICAgYjEgPSB0aGlzLmJpdHMuc2xpY2UoKTtcbiAgICAgICAgYjIgPSBib2IuYml0cy5zbGljZSgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE4gLyAyOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBpZHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBkaWZmX2JpdHMubGVuZ3RoKTtcbiAgICAgICAgICAgIGIxW2RpZmZfYml0c1tpZHhdXSA9IGJvYi5iaXRzW2RpZmZfYml0c1tpZHhdXTtcbiAgICAgICAgICAgIGIyW2RpZmZfYml0c1tpZHhdXSA9IHRoaXMuYml0c1tkaWZmX2JpdHNbaWR4XV07XG4gICAgICAgICAgICBkaWZmX2JpdHMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgYmFieTE6IGIxLCBiYWJ5MjogYjIgfTtcbiAgICB9XG4gICAgY3Jvc3NvdmVyX29yZGVyZWQoYm9iKSB7XG4gICAgICAgIGNvbnN0IGIxID0gW107XG4gICAgICAgIGNvbnN0IGIyID0gW107XG4gICAgICAgIGxldCBpbmYgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0aGlzLmxlbmd0aCksIHN1cCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMubGVuZ3RoKSwgdG1wID0gaW5mO1xuICAgICAgICBpbmYgPSBNYXRoLm1pbihpbmYsIHN1cCk7XG4gICAgICAgIHN1cCA9IE1hdGgubWF4KHRtcCwgc3VwKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IGluZjsgaSA8IHN1cDsgaSsrKSB7XG4gICAgICAgICAgICBiMVtpXSA9IChpbmYgPD0gaSAmJiBpIDw9IHN1cCkgPyBib2IuYml0c1tpXSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGIyW2ldID0gKGluZiA8PSBpICYmIGkgPD0gc3VwKSA/IHRoaXMuYml0c1tpXSA6IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChiMS5pbmRleE9mKHRoaXMuYml0c1tpXSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgYjFbaV0gPSB0aGlzLmJpdHNbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGIxLmluZGV4T2YodGhpcy5iaXRzW2pdKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGIxW2ldID0gdGhpcy5iaXRzW2pdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGIyLmluZGV4T2YoYm9iLmJpdHNbaV0pID09PSAtMSkge1xuICAgICAgICAgICAgICAgIGIyW2ldID0gYm9iLmJpdHNbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGIyLmluZGV4T2YoYm9iLmJpdHNbal0pID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYjJbaV0gPSBib2IuYml0c1tqXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBiYWJ5MTogYjEsIGJhYnkyOiBiMiB9O1xuICAgIH1cbiAgICAvLyBwdWJsaWMgY3Jvc3NvdmVyKGJvYjogQ2hyb21vc29tZTxUPiwgbWV0aG9kOiBDcm9zc292ZXJNZXRob2QpOiBPZmZzcHJpbmc8VD47XG4gICAgLy8gcHVibGljIGNyb3Nzb3Zlcihib2I6IENocm9tb3NvbWU8VD4sIG1ldGhvZDogQ3VzdG9tQ3Jvc3NvdmVyTWV0aG9kPFQ+KTogT2Zmc3ByaW5nPFQ+O1xuICAgIGNyb3Nzb3Zlcihib2IsIG1ldGhvZCkge1xuICAgICAgICBpZiAodHlwZW9mIG1ldGhvZCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHN3aXRjaCAobWV0aG9kKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBDcm9zc292ZXJNZXRob2RzXzEuQ3Jvc3NvdmVyTWV0aG9kLlNJTkdMRV9QT0lOVDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3Jvc3NvdmVyX3NpbmdsZV9wb2ludChib2IpO1xuICAgICAgICAgICAgICAgIGNhc2UgQ3Jvc3NvdmVyTWV0aG9kc18xLkNyb3Nzb3Zlck1ldGhvZC5UV09fUE9JTlQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNyb3Nzb3Zlcl90d29fcG9pbnQoYm9iKTtcbiAgICAgICAgICAgICAgICBjYXNlIENyb3Nzb3Zlck1ldGhvZHNfMS5Dcm9zc292ZXJNZXRob2QuVU5JRk9STTpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3Jvc3NvdmVyX3VuaWZvcm0oYm9iKTtcbiAgICAgICAgICAgICAgICBjYXNlIENyb3Nzb3Zlck1ldGhvZHNfMS5Dcm9zc292ZXJNZXRob2QuSEFMRl9VTklGT1JNOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jcm9zc292ZXJfaGFsZl91bmlmb3JtKGJvYik7XG4gICAgICAgICAgICAgICAgY2FzZSBDcm9zc292ZXJNZXRob2RzXzEuQ3Jvc3NvdmVyTWV0aG9kLk9SREVSRUQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNyb3Nzb3Zlcl9vcmRlcmVkKGJvYik7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmltcGxlbWVudGVkIENyb3Nzb3Zlck1ldGhvZDogJHttZXRob2R9ICgke0Nyb3Nzb3Zlck1ldGhvZHNfMS5Dcm9zc292ZXJNZXRob2RbbWV0aG9kXX0pYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1ldGhvZChib2IpO1xuICAgIH1cbiAgICBzZXRCaXRzKGJpdHMpIHtcbiAgICAgICAgdGhpcy5iaXRzID0gWy4uLmJpdHNdO1xuICAgIH1cbiAgICBnZXRHZW5lcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYml0cztcbiAgICB9XG4gICAgY29weShib2IpIHtcbiAgICAgICAgdGhpcy5iaXRzID0gYm9iLmJpdHMuc2xpY2UoKTtcbiAgICAgICAgdGhpcy5yYW5kX2Z1bmMgPSBib2IucmFuZF9mdW5jO1xuICAgICAgICB0aGlzLmZpdG5lc3MgPSBib2IuZml0bmVzcztcbiAgICB9XG4gICAgY2xvbmUoKSB7XG4gICAgICAgIGxldCBjID0gbmV3IENocm9tb3NvbWUodGhpcy5sZW5ndGgsIHRoaXMucmFuZF9mdW5jKTtcbiAgICAgICAgYy5jb3B5KHRoaXMpO1xuICAgICAgICByZXR1cm4gYztcbiAgICB9XG59XG5leHBvcnRzLkNocm9tb3NvbWUgPSBDaHJvbW9zb21lO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jbGFzcyBFdmVudEVtaXR0ZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBUaGlzIE1hcCBpcyBvZnRlbiB1bnVzZWQsIGl0IGlzIHRoZXJmb3JlIGJlc3QgdG8gaW5pdGlhbGl6ZSBpdCBvbmx5IHdoZW4gbmVlZGVkXG4gICAgICAgIC8vIGkuZSAgd2hlbiB0aGUgb24oKSBtZXRob2QgaXMgY2FsbGVkIGZvciB0aGUgZmlyc3QgdGltZVxuICAgICAgICAvLyB0aGlzLmhhbmRsZXJzID0gbmV3IE1hcDxzdHJpbmcsIEV2ZW50SGFuZGxlcltdPigpO1xuICAgIH1cbiAgICBvbihldiwgaGFuZGxlcikge1xuICAgICAgICBpZiAodGhpcy5oYW5kbGVycyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZXJzID0gbmV3IE1hcCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmhhbmRsZXJzLmhhcyhldikpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlcnMuZ2V0KGV2KS5wdXNoKGhhbmRsZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVycy5zZXQoZXYsIFtoYW5kbGVyXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZW1pdChldiwgdmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuaGFuZGxlcnMgIT09IHVuZGVmaW5lZCAmJiB0aGlzLmhhbmRsZXJzLmhhcyhldikpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaGFuZGxlciBvZiB0aGlzLmhhbmRsZXJzLmdldChldikpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGJpbmRFdmVudChlbSwgZXYpIHtcbiAgICAgICAgZW0ub24oZXYsIHZhbHVlID0+IHRoaXMuZW1pdChldiwgdmFsdWUpKTtcbiAgICB9XG59XG5leHBvcnRzLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZnVuY3Rpb24gc2VsZWN0S0Jlc3QoYXJyYXksIGspIHtcbiAgICAvLyByZXR1cm4gYXJyYXkuc29ydCgoYSwgYikgPT4gYi5nZXRGaXRuZXNzKCkgLSBhLmdldEZpdG5lc3MoKSkuc2xpY2UoMCwgayk7XG4gICAgcmV2ZXJzZV9wYXJ0aWFsX3F1aWNrc29ydChhcnJheSwgayk7XG4gICAgcmV0dXJuIGFycmF5LnNsaWNlKDAsIGspO1xufVxuZXhwb3J0cy5zZWxlY3RLQmVzdCA9IHNlbGVjdEtCZXN0O1xuZnVuY3Rpb24gX3F1aWNrc29ydChhcnIsIGZyb20gPSAwLCB0byA9IGFyci5sZW5ndGggLSAxKSB7XG4gICAgY29uc3QgcGl2b3QgPSBhcnJbTWF0aC5mbG9vcigoZnJvbSArIHRvKSAvIDIpXS5nZXRGaXRuZXNzKCk7XG4gICAgaWYgKGZyb20gPCB0bykge1xuICAgICAgICBjb25zdCBwID0gcGFydGl0aW9uKGFyciwgZnJvbSwgdG8sIHBpdm90KTtcbiAgICAgICAgX3F1aWNrc29ydChhcnIsIGZyb20sIHAgLSAxKTtcbiAgICAgICAgX3F1aWNrc29ydChhcnIsIHAsIHRvKTtcbiAgICB9XG59XG5mdW5jdGlvbiByZXZlcnNlX3BhcnRpYWxfcXVpY2tzb3J0KGFyciwgaywgZnJvbSA9IDAsIHRvID0gYXJyLmxlbmd0aCAtIDEpIHtcbiAgICBjb25zdCBwaXZvdCA9IGFycltNYXRoLmZsb29yKChmcm9tICsgdG8pIC8gMildLmdldEZpdG5lc3MoKTtcbiAgICBpZiAoZnJvbSA8IHRvKSB7XG4gICAgICAgIGNvbnN0IHAgPSBwYXJ0aXRpb24oYXJyLCBmcm9tLCB0bywgcGl2b3QpO1xuICAgICAgICBfcXVpY2tzb3J0KGFyciwgZnJvbSwgcCAtIDEpO1xuICAgICAgICBpZiAocCA8IGspIHtcbiAgICAgICAgICAgIF9xdWlja3NvcnQoYXJyLCBwLCB0byk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBwYXJ0aXRpb24oYXJyYXksIGxlZnQsIHJpZ2h0LCBwaXZvdCkge1xuICAgIC8vIHB1dCBldmVyeSBlbGVtZW50IHNtYWxsZXIgdGhhbiB0aGUgcGl2b3QgdG8gaXRzIGxlZnRcbiAgICAvLyBhbmQgZXZlcnkgZWxlbWVudCBiaWZmZXIgdG8gaXRzIHJpZ2h0XG4gICAgLy8gcmV0dXJuaW5nIHRoZSBwaXZvdCdzIHBvc2l0aW9uXG4gICAgd2hpbGUgKGxlZnQgPD0gcmlnaHQpIHtcbiAgICAgICAgd2hpbGUgKGFycmF5W2xlZnRdLmdldEZpdG5lc3MoKSA+IHBpdm90KSB7XG4gICAgICAgICAgICBsZWZ0Kys7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKGFycmF5W3JpZ2h0XS5nZXRGaXRuZXNzKCkgPCBwaXZvdCkge1xuICAgICAgICAgICAgcmlnaHQtLTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGVmdCA8PSByaWdodCkge1xuICAgICAgICAgICAgW2FycmF5W2xlZnRdLCBhcnJheVtyaWdodF1dID0gW2FycmF5W3JpZ2h0XSwgYXJyYXlbbGVmdF1dO1xuICAgICAgICAgICAgbGVmdCsrO1xuICAgICAgICAgICAgcmlnaHQtLTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbGVmdDtcbn1cbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY2xhc3MgVFNQIHtcbiAgICBjb25zdHJ1Y3RvcihjaXRpZXMpIHtcbiAgICAgICAgdGhpcy5jaXRpZXMgPSBjaXRpZXM7XG4gICAgICAgIHRoaXMuZGlzdF9tYXAgPSBuZXcgTWFwKCk7XG4gICAgfVxuICAgIGRpc3QyRChjaXR5QSwgY2l0eUIpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgucG93KHRoaXMuZGlzdDJEX3NxdWFyZWQoY2l0eUEsIGNpdHlCKSwgMC41KTtcbiAgICB9XG4gICAgZGlzdDJEX3NxdWFyZWQoY2l0eUEsIGNpdHlCKSB7XG4gICAgICAgIGxldCBjaXR5MSwgY2l0eTI7XG4gICAgICAgIGlmIChjaXR5QiA+IGNpdHlBKSB7XG4gICAgICAgICAgICBjaXR5MSA9IGNpdHlBO1xuICAgICAgICAgICAgY2l0eTIgPSBjaXR5QjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNpdHkxID0gY2l0eUI7XG4gICAgICAgICAgICBjaXR5MiA9IGNpdHlBO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGtleSA9IGAke2NpdHkxfS0+JHtjaXR5Mn1gO1xuICAgICAgICBpZiAodGhpcy5kaXN0X21hcC5oYXMoa2V5KSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlzdF9tYXAuZ2V0KGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgcDEgPSB0aGlzLmNpdGllc1tjaXR5QV0sIHAyID0gdGhpcy5jaXRpZXNbY2l0eUJdO1xuICAgICAgICAgICAgY29uc3QgZGlzdF9zcSA9IChNYXRoLnBvdygocDEueCAtIHAyLngpLCAyKSArIE1hdGgucG93KChwMS55IC0gcDIueSksIDIpKTtcbiAgICAgICAgICAgIHRoaXMuZGlzdF9tYXAuc2V0KGtleSwgZGlzdF9zcSk7XG4gICAgICAgICAgICByZXR1cm4gZGlzdF9zcTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBjaGVjayB0aGF0IGVhY2ggY2l0eSBpcyB2aXNpdGVkIGV4YWN0bHkgb25jZVxuICAgIGNoZWNrUGF0aFZhbGlkaXR5KHBhdGgpIHtcbiAgICAgICAgaWYgKHBhdGgubGVuZ3RoICE9PSB0aGlzLmNpdGllcy5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGxldCBzb3J0ZWQgPSBwYXRoLnNsaWNlKCkuc29ydCgpO1xuICAgICAgICBsZXQgcHJldiA9IHNvcnRlZFswXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBzb3J0ZWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChwcmV2ID09PSBzb3J0ZWRbaV0pXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgcHJldiA9IHNvcnRlZFtpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZGlzdGFuY2UocGF0aCkge1xuICAgICAgICBpZiAoIXRoaXMuY2hlY2tQYXRoVmFsaWRpdHkocGF0aCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBwYXRoOiBFYWNoIGNpdHkgbXVzdCBiZSB2aXNpdGVkIGV4YWN0bHkgb25jZS5gKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZGlzdCA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgcGF0aC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZGlzdCArPSB0aGlzLmRpc3QyRChwYXRoW2kgLSAxXSwgcGF0aFtpXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRpc3Q7XG4gICAgfVxuICAgIGRpc3RhbmNlX3NxdWFyZWQocGF0aCkge1xuICAgICAgICBpZiAoIXRoaXMuY2hlY2tQYXRoVmFsaWRpdHkocGF0aCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBwYXRoOiBFYWNoIGNpdHkgbXVzdCBiZSB2aXNpdGVkIGV4YWN0bHkgb25jZS5gKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZGlzdCA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgcGF0aC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZGlzdCArPSB0aGlzLmRpc3QyRF9zcXVhcmVkKHBhdGhbaSAtIDFdLCBwYXRoW2ldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGlzdDtcbiAgICB9XG4gICAgZ2V0Q2l0aWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaXRpZXM7XG4gICAgfVxuICAgIGdldENpdHkoaWR4KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNpdGllc1tpZHhdO1xuICAgIH1cbiAgICBkcmF3KGN0eCwgcGF0aCkge1xuICAgICAgICBpZiAocGF0aC5sZW5ndGggIT09IHRoaXMuY2l0aWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFYWNoIGNpdHkgbXVzdCBiZSB2aXNpdGVkYCk7XG4gICAgICAgIH1cbiAgICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjdHguY2FudmFzLndpZHRoLCBjdHguY2FudmFzLmhlaWdodCk7XG4gICAgICAgIGNvbnN0IGRwciA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzU1NTU1NSc7XG4gICAgICAgIGN0eC5saW5lV2lkdGggPSAyO1xuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHBhdGgubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIGN0eC5tb3ZlVG8odGhpcy5jaXRpZXNbcGF0aFtpIC0gMV1dLnggLyBkcHIsIHRoaXMuY2l0aWVzW3BhdGhbaSAtIDFdXS55IC8gZHByKTtcbiAgICAgICAgICAgIGN0eC5saW5lVG8odGhpcy5jaXRpZXNbcGF0aFtpXV0ueCAvIGRwciwgdGhpcy5jaXRpZXNbcGF0aFtpXV0ueSAvIGRwcik7XG4gICAgICAgICAgICBjdHguY2xvc2VQYXRoKCk7XG4gICAgICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMDFjYzMzJztcbiAgICAgICAgZm9yIChjb25zdCBjaXR5IG9mIHRoaXMuY2l0aWVzKSB7XG4gICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICBjdHguYXJjKGNpdHkueCAvIGRwciwgY2l0eS55IC8gZHByLCA0LCAwLCAyICogTWF0aC5QSSk7XG4gICAgICAgICAgICBjdHguY2xvc2VQYXRoKCk7XG4gICAgICAgICAgICBjdHguZmlsbCgpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5UU1AgPSBUU1A7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmZ1bmN0aW9uIHNodWZmbGUoYXJyYXkpIHtcbiAgICBjb25zdCBhcnIgPSBbLi4uYXJyYXldO1xuICAgIGZvciAobGV0IGkgPSBhcnIubGVuZ3RoIC0gMTsgaSA+IDA7IGktLSkge1xuICAgICAgICBjb25zdCBzd2FwX2lkeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChpICsgMSkpO1xuICAgICAgICBbYXJyW2ldLCBhcnJbc3dhcF9pZHhdXSA9IFthcnJbc3dhcF9pZHhdLCBhcnJbaV1dO1xuICAgIH1cbiAgICByZXR1cm4gYXJyO1xufVxuZXhwb3J0cy5zaHVmZmxlID0gc2h1ZmZsZTtcbiJdLCJzb3VyY2VSb290IjoiIn0=