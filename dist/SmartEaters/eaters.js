!function(t){var s={};function e(i){if(s[i])return s[i].exports;var o=s[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=s,e.d=function(t,s,i){e.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,s){if(1&s&&(t=e(t)),8&s)return t;if(4&s&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var o in t)e.d(i,o,function(s){return t[s]}.bind(null,o));return i},e.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(s,"a",s),s},e.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},e.p="",e(e.s=3)}([function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),function(t){t[t.SINGLE_POINT=0]="SINGLE_POINT",t[t.TWO_POINT=1]="TWO_POINT",t[t.UNIFORM=2]="UNIFORM",t[t.HALF_UNIFORM=3]="HALF_UNIFORM",t[t.ORDERED=4]="ORDERED"}(s.CrossoverMethod||(s.CrossoverMethod={}))},function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),function(t){t[t.FLIP=0]="FLIP",t[t.SWAP=1]="SWAP"}(s.MutationMethod||(s.MutationMethod={}))},function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),function(t){t.clamp=((t,s,e)=>t>=s&&t<=e?t:t<s?s:e),t.map=((t,s,e,i,o)=>(t-s)/(e-s)*(o-i)+i),t.TWO_PI=2*Math.PI}(s.MathUtils||(s.MathUtils={}))},function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e(0),o=e(4),n=document.createElement("canvas");n.width=window.innerWidth*o.DPR,n.height=window.innerHeight*o.DPR,n.style.width=`${window.innerWidth}px`,n.style.height=`${window.innerHeight}px`,n.getContext("2d").scale(o.DPR,o.DPR),document.body.style.padding="0",document.body.style.margin="0",document.body.appendChild(n);const r=new o.SmartEaters(n,{elite_count:5,elite_copies:2,ticks_per_gen:2e3,population_size:100,food_count:120,crossover_method:i.CrossoverMethod.TWO_POINT,wrap_borders:!0,mutation_rate:.02,hidden_layers_sizes:[8]});r.run(),window.addEventListener("resize",()=>{n.style.width=`${window.innerWidth}px`,n.style.height=`${window.innerHeight}px`,n.width=window.innerWidth*o.DPR,n.height=window.innerHeight*o.DPR,n.getContext("2d").scale(o.DPR,o.DPR)}),window.addEventListener("keypress",t=>{switch(t.key){case" ":r.pause();break;case"f":r.follow_fittest=!r.follow_fittest;break;case"p":r.fast_mode_refresh_rate+=2;break;case"m":r.fast_mode_refresh_rate-=2,r.fast_mode_refresh_rate<1&&(r.fast_mode_refresh_rate=1);break;case"l":r.show_lines=!r.show_lines;break;case"h":r.hide_non_selected=!r.hide_non_selected;break;case"a":if(r.selectedIdx){const t=r.getEaterBrain(r.selectedIdx),s=window.URL.createObjectURL(new Blob([`\n                {\n                    "params": ${JSON.stringify(r.parameters)},\n                    "brain": ${JSON.stringify(t)}\n                }\n                `]));window.open(`analysis.html?b=${s}`)}break;default:r.toggleFastMode()}})},function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e(0),o=e(5),n=e(9),r=e(10),a=e(11),h=e(2);s.DPR=window.devicePixelRatio;s.SmartEaters=class{constructor(t,e){this.ticks=0,this.selected_idx=-1,this.follow_fittest=!1,this.paused=!1,this.fast_mode=!1,this.fast_mode_refresh_rate=2,this.show_lines=!1,this.hide_non_selected=!1,this.stop_mating=!1,this.cnv=t,this.ctx=this.cnv.getContext("2d");let l=(t,s)=>null===t||void 0===t?s:t;this.params=e||{},this.params.population_size=this.params.population_size||30,this.params.hidden_layers_sizes=this.params.hidden_layers_sizes||[6],this.params.food_count=this.params.food_count||40,this.params.crossover_rate=l(this.params.crossover_rate,.7),this.params.mutation_rate=l(this.params.mutation_rate,.1),this.params.elite_count=l(this.params.elite_count,4),this.params.elite_copies=l(this.params.elite_copies,1),this.params.max_speed=this.params.max_speed||2,this.params.max_turn_rate=this.params.max_turn_rate||.3,this.params.ticks_per_gen=this.params.ticks_per_gen||1e3,this.params.crossover_method=l(this.params.crossover_method,i.CrossoverMethod.SINGLE_POINT),this.params.eater_size=this.params.eater_size||12,this.params.food_size=this.params.food_size||5,this.params.wrap_borders=l(this.params.wrap_borders,!0),this.layer_sizes=[4,...this.params.hidden_layers_sizes,2],this.brain=new r.NeuralNet,this.genetics=new o.Darwin({population_size:this.params.population_size,rand_func:()=>2*Math.random()-1,chromosome_length:r.NeuralNet.weightsCount(this.layer_sizes)}),this.population=this.genetics.getPopulation().map((t,s)=>new n.Eater(this.randomPos(),Math.random()*h.MathUtils.TWO_PI,s)),this.cnv.addEventListener("click",t=>{const e=new a.Vector2D(t.clientX*s.DPR,t.clientY*s.DPR);let i=0,o=1/0;for(let t=0;t<this.population.length;t++){const s=this.population[t].position.dist_sq(e);s<o&&(o=s,i=t)}Math.pow(o,.5)<2*this.params.eater_size*s.DPR?this.setSelected(i):this.selected_idx=-1}),this.spawnFood()}spawnFood(){this.food=[];for(let t=0;t<this.params.food_count;t++)this.food.push(this.randomPos())}randomPos(){return a.Vector2D.rand().hadamard([this.cnv.width,this.cnv.height])}getClosestFood(t){let s=0,e=1/0;for(let i=0;i<this.food.length;i++){const o=t.position.dist_sq(this.food[i]);o<e&&(e=o,s=i)}return{index:s,dist:Math.pow(e,.5)}}tick(){if(!this.paused){++this.ticks>this.params.ticks_per_gen&&(this.nextGeneration(),this.ticks=0);for(const t of this.population){const e=this.genetics.getPopulation()[t.getChromosomeIdx()];this.brain.putWeights(this.layer_sizes,e.getBits());const i=this.getClosestFood(t);t.closest_food=a.Vector2D.clone(this.food[i.index]);const[o,n]=this.food[i.index].sub(t.position).normalize().toArray();if(i.dist<(this.params.eater_size+this.params.food_size)/2){const t=e.getFitness()||1;e.setFitness(2*t),this.food[i.index]=this.randomPos()}const r=[Math.cos(t.angle),Math.sin(t.angle)],[l,c]=this.brain.run(...r,o,n),u=h.MathUtils.clamp(l-c,-this.params.max_turn_rate,this.params.max_turn_rate);t.angle+=u,t.lookat=new a.Vector2D(r[0],r[1]),t.food_dir=new a.Vector2D(o,n),t.position.plus(t.lookat.times(this.params.max_speed*s.DPR));const d=t.position;this.params.wrap_borders?(d.x>this.cnv.width&&(d.x=0),d.x<0&&(d.x=this.cnv.width),d.y>this.cnv.height&&(d.y=0),d.y<0&&(d.y=this.cnv.height)):(d.x>this.cnv.width&&(d.x=this.cnv.width),d.x<0&&(d.x=0),d.y>this.cnv.height&&(d.y=this.cnv.height),d.y<0&&(d.y=0))}}}pause(){this.paused=!this.paused}nextGeneration(){if(!this.stop_mating){this.genetics.mate();for(const t of this.genetics.getPopulation())t.setFitness(0);this.spawnFood();for(let t of this.population)t.position=this.randomPos();this.selected_idx=-1}}run(){let t=()=>{this.tick(),this.render(),this.fast_mode?setTimeout(t,0):requestAnimationFrame(t)};t()}render(){this.fast_mode&&this.ticks%this.fast_mode_refresh_rate!=0||(this.genetics.updateStats(),this.ctx.clearRect(0,0,this.cnv.width,this.cnv.height),this.drawFood(),this.drawEaters(),this.highlightSelectedEater(),this.drawGenerationInfo())}drawGenerationInfo(){const t=0!==this.genetics.getFittest().getFitness()?Math.log2(this.genetics.getFittest().getFitness()):0;this.ctx.fillStyle="black",this.ctx.fillText(`Generation: ${this.genetics.getGeneration()}`,5,10),this.ctx.fillText(`avg: ${Math.log2(1+this.genetics.getAverageFitness()).toFixed(3)}`,5,25),this.ctx.fillText(`best: ${t}`,5,40),this.ctx.fillText(`ticks: ${this.ticks} / ${this.params.ticks_per_gen}`,5,55)}highlightSelectedEater(){if(this.follow_fittest&&(this.selected_idx=this.genetics.getStats().fittest_idx),-1!==this.selected_idx&&!this.hide_non_selected){this.ctx.lineWidth=2,this.ctx.strokeStyle="red",this.ctx.beginPath();const t=this.population[this.selected_idx],e=t.position;this.ctx.arc(e.x/s.DPR,e.y/s.DPR,2*this.params.eater_size,0,h.MathUtils.TWO_PI),this.ctx.stroke(),this.ctx.closePath(),this.ctx.beginPath(),this.ctx.lineWidth=1,this.ctx.strokeStyle="black",this.ctx.moveTo(e.x/s.DPR,e.y/s.DPR);const i=e.add(t.food_dir.times(2*this.params.eater_size*s.DPR));this.ctx.lineTo(i.x/s.DPR,i.y/s.DPR),this.ctx.stroke()}}drawEaters(){const t=[46,204,113],e=[255,0,0],i=Math.log2(this.genetics.getFittest().getFitness());let o=0;for(const n of this.population){if(this.show_lines){this.ctx.beginPath(),this.ctx.lineWidth=1,this.ctx.strokeStyle="black",this.ctx.moveTo(n.position.x/s.DPR,n.position.y/s.DPR);const t=n.position.add(n.food_dir.times(n.position.dist(n.closest_food)));this.ctx.lineTo(t.x/s.DPR,t.y/s.DPR),this.ctx.stroke()}if(this.hide_non_selected&&void 0!==this.selected_idx&&o++!==this.selected_idx)continue;const r=Math.log2(this.genetics.getPopulation()[n.getChromosomeIdx()].getFitness()),l=[h.MathUtils.clamp(h.MathUtils.map(r,0,i,t[0],e[0]),Math.min(t[0],e[0]),Math.max(t[0],e[0])),h.MathUtils.clamp(h.MathUtils.map(r,0,i,t[1],e[1]),Math.min(t[1],e[1]),Math.max(t[1],e[1])),h.MathUtils.clamp(h.MathUtils.map(r,0,i,t[2],e[2]),Math.min(t[2],e[2]),Math.max(t[2],e[2]))];this.ctx.lineWidth=4,this.ctx.fillStyle=`rgb(\n                ${Math.floor(l[0])},\n                ${Math.floor(l[1])},\n                ${Math.floor(l[1])}\n            )`,this.ctx.beginPath();let c=n.lookat.times(this.params.eater_size*s.DPR).add(n.position),u=c.sub(n.position).angle(),d=Math.PI/1.3,p=new a.Vector2D(Math.cos(u+d),Math.sin(u+d)),_=new a.Vector2D(Math.cos(u-d),Math.sin(u-d)),f=n.position.add(p.times(this.params.eater_size*s.DPR)),m=n.position.add(_.times(this.params.eater_size*s.DPR));this.ctx.moveTo(f.x/s.DPR,f.y/s.DPR),this.ctx.lineTo(c.x/s.DPR,c.y/s.DPR),this.ctx.lineTo(m.x/s.DPR,m.y/s.DPR),this.ctx.fill()}}drawFood(){this.ctx.fillStyle="rgb(52, 73, 94)";const t=this.params.food_size;for(let e of this.food)this.ctx.beginPath(),this.ctx.fillRect((e.x-t/2)/s.DPR,(e.y-t/2)/s.DPR,t,t),this.ctx.fill()}setSelected(t){this.follow_fittest=!1,this.selected_idx=t}getSelected(){return this.population[this.selected_idx]}getEater(t){return this.population[t]}getEaterBrain(t){return r.NeuralNet.fromWeights(this.layer_sizes,this.genetics.getChromosome(this.population[t].getChromosomeIdx()).getBits()).toFunction()}toggleFastMode(){this.fast_mode=!this.fast_mode}getDarwinInstance(){return this.genetics}getFittestBrain(){return r.NeuralNet.fromWeights(this.layer_sizes,this.genetics.getFittest().getBits()).toFunction()}toggleMating(){this.stop_mating=!this.stop_mating}get selectedIdx(){return this.selected_idx}get parameters(){return this.params}}},function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e(6),o=e(0),n=e(1),r=e(8);s.Darwin=class{constructor(t){this.population=[],this.generation=0;const s=()=>{this.stats.needs_update=!0};for(let e=0;e<t.population_size;e++){const e=new i.Chromosome(t.chromosome_length,t.rand_func);e.on("update_fitness",s),this.population.push(e)}this.params=Object.assign({crossover_rate:.7,mutation_rate:1/t.chromosome_length,crossover_method:o.CrossoverMethod.SINGLE_POINT,mutation_method:n.MutationMethod.FLIP,elite_count:1,elite_copies:1},t),this.stats={fittest:this.population[0],avg_fitness:0,sum_fitness:0,fittest_idx:0,needs_update:!0}}duplicateElite(t){if(this.params.elite_count>0){const s=this.getTopChromosomes(this.params.elite_count);t.push(...s);for(let e=0;e<this.params.elite_count;e++)for(let i=0;i<this.params.elite_copies;i++)t.push(s[e].clone())}}crossover(t){for(;t.length<this.params.population_size;)if(Math.random()<this.params.crossover_rate){const s=this.getRandomChromosome(),e=this.getRandomChromosome(),o=s.crossover(e,this.params.crossover_method),n=new i.Chromosome(o.baby1,this.params.rand_func),r=new i.Chromosome(o.baby2,this.params.rand_func);t.push(n,r)}this.params.population_size%2==1&&t.pop()}mutate(t){for(const s of t)s.mutate(this.params.mutation_rate,this.params.mutation_method)}updateFitness(t){for(const s of this.population)s.setFitness(t(s.getBits()));this.stats.needs_update=!0}mate(){const t=[];this.duplicateElite(t),this.crossover(t),this.mutate(t),this.population=t,this.generation++,this.updateStats(!0)}getPopulation(){return this.population}getChromosome(t){return this.population[t]}getRandomChromosome(){if(this.stats.needs_update&&this.updateStats(),0===this.stats.sum_fitness)return this.population[Math.floor(Math.random()*this.population.length)];const t=Math.random()*this.stats.sum_fitness;let s=0;for(let e=0;e<this.population.length;e++)if((s+=this.population[e].getFitness())>t)return this.population[e]}getTopChromosomes(t){return r.partialQuickSort(this.population,t).slice(0,t)}getAverageFitness(){return this.stats.needs_update&&this.updateStats(),this.stats.avg_fitness}getFittest(){return this.stats.needs_update&&this.updateStats(),this.stats.fittest}getParams(){return this.params}getGeneration(){return this.generation}getStats(){return this.stats}updateStats(t=!1){if(t||this.stats.needs_update){let t=0,s=0,e=0;for(let i=0;i<this.population.length;i++){const o=this.population[i].getFitness();t+=o,o>s&&(s=o,e=i)}this.stats.sum_fitness=t,this.stats.avg_fitness=t/this.params.population_size,this.stats.fittest=this.population[e].clone(),this.stats.fittest_idx=e,this.stats.needs_update=!1}}}},function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e(1),o=e(0),n=e(7);class r extends n.EventEmitter{constructor(t,s){if(super(),this.bits=[],this.fitness=0,this.rand_func=s,"number"==typeof t){this.length=t;for(let t=0;t<this.length;t++)this.bits.push(s())}else this.bits=t,this.length=t.length}getFitness(){return this.fitness}setFitness(t){this.fitness=t,this.emit("update_fitness",t)}compare(t){let s=0;for(let e=0;e<Math.min(this.length,t.length);e++)s+=this.bits[e]!==t.bits[e]?1:0;return s}mutate_flip(t){for(let s=0;s<this.length;s++)Math.random()<t&&(this.bits[s]=this.rand_func())}mutate_swap(t){for(let s=0;s<this.length;s++)if(Math.random()<t){const t=Math.floor(Math.random()*this.length),e=this.bits[s];this.bits[s]=this.bits[t],this.bits[t]=e}}mutate(t=1/this.length,s){if("number"==typeof s)switch(s){case i.MutationMethod.FLIP:this.mutate_flip(t);break;case i.MutationMethod.SWAP:this.mutate_swap(t)}else this.setBits(s(this.getBits()))}crossover_single_point(t){const s=[],e=[],i=Math.floor(Math.random()*this.length);for(let o=0;o<this.length;o++)s.push(o<i?this.bits[o]:t.bits[o]),e.push(o<i?t.bits[o]:this.bits[o]);return{baby1:s,baby2:e}}crossover_two_point(t){const s=[],e=[];let i=Math.floor(Math.random()*this.length),o=Math.floor(Math.random()*this.length);if(i>o){const t=o;o=i,i=t}for(let n=0;n<this.length;n++)s.push(n<i?this.bits[n]:n<o?t.bits[n]:this.bits[n]),e.push(n<i?t.bits[n]:n<o?this.bits[n]:t.bits[n]);return{baby1:s,baby2:e}}crossover_uniform(t){const s=[],e=[];for(let i=0;i<this.length;i++){let o=Math.random()<.5;s.push(o?t.bits[i]:this.bits[i]),e.push(o?this.bits[i]:t.bits[i])}return{baby1:s,baby2:e}}crossover_half_uniform(t){let s=[],e=[],i=[];for(let s=0;s<this.length;s++)this.bits[s]!==t.bits[s]&&i.push(s);let o=i.length;s=this.bits.slice(),e=t.bits.slice();for(let n=0;n<o/2;n++){let o=Math.floor(Math.random()*i.length);s[i[o]]=t.bits[i[o]],e[i[o]]=this.bits[i[o]],i.splice(o,1)}return{baby1:s,baby2:e}}crossover_ordered(t){const s=[],e=[];let i=Math.floor(Math.random()*this.length),o=Math.floor(Math.random()*this.length),n=i;i=Math.min(i,o),o=Math.max(n,o);for(let n=i;n<o;n++)s[n]=i<=n&&n<=o?t.bits[n]:void 0,e[n]=i<=n&&n<=o?this.bits[n]:void 0;for(let i=0;i<this.length;i++){if(-1===s.indexOf(this.bits[i]))s[i]=this.bits[i];else for(let t=0;t<this.length;t++)-1===s.indexOf(this.bits[t])&&(s[i]=this.bits[t]);if(-1===e.indexOf(t.bits[i]))e[i]=t.bits[i];else for(let s=0;s<this.length;s++)-1===e.indexOf(t.bits[s])&&(e[i]=t.bits[s])}return{baby1:s,baby2:e}}crossover(t,s){if("number"==typeof s)switch(s){case o.CrossoverMethod.SINGLE_POINT:return this.crossover_single_point(t);case o.CrossoverMethod.TWO_POINT:return this.crossover_two_point(t);case o.CrossoverMethod.UNIFORM:return this.crossover_uniform(t);case o.CrossoverMethod.HALF_UNIFORM:return this.crossover_half_uniform(t);case o.CrossoverMethod.ORDERED:return this.crossover_ordered(t);default:throw new Error(`Unimplemented CrossoverMethod: ${s} (${o.CrossoverMethod[s]})`)}return s(t)}setBits(t){this.bits=[...t]}getBits(){return this.bits}copy(t){this.bits=t.bits.slice(),this.rand_func=t.rand_func,this.fitness=t.fitness}clone(){let t=new r(this.length,this.rand_func);return t.copy(this),t}}s.Chromosome=r},function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.EventEmitter=class{constructor(){this.handlers=new Map}on(t,s){this.handlers.has(t)?this.handlers.get(t).push(s):this.handlers.set(t,[s])}emit(t,s){if(this.handlers.has(t))for(const e of this.handlers.get(t))e.call(this,s)}bindEvent(t,s){t.on(s,t=>this.emit(s,t))}}},function(t,s,e){"use strict";function i(t,s,e){if(s===e)return;const i=t[s];t[s]=t[e],t[e]=i}Object.defineProperty(s,"__esModule",{value:!0}),s.partialQuickSort=function(t,s){return function t(s,e,o,n){const r=Math.floor((e+o)/2);if(e<o){const a=function(t,s,e,o){const n=t[s].getFitness();for(;e<=o;){for(;t[e].getFitness()>n;)e++;for(;t[o].getFitness()<n;)o--;e<=o&&(i(t,e,o),e++,o--)}return e}(s,r,e,o);t(s,e,a-1,n),a<n&&t(s,a,o,n)}}(t,0,t.length-1,s),t}},function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i=e(2);s.Eater=class{constructor(t,s,e){this._pos=t,this._angle=s,this.chromosomeIdx=e}getChromosomeIdx(){return this.chromosomeIdx}get position(){return this._pos}set position(t){this._pos=t}get angle(){return this._angle}set angle(t){this._angle=t%i.MathUtils.TWO_PI}}},function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});class i{constructor(){this.weights_and_biases=[]}getWeight(t,s,e){return this.weights_and_biases[this.offsets[t-1]+s*(this.num_neurons_per_layer[t-1]+1)+e+1]}getBias(t,s){return this.weights_and_biases[this.offsets[t-1]+s*(this.num_neurons_per_layer[t-1]+1)]}feedforward(t){if(0===this.weights_and_biases.length)throw new Error("Cannot feedforward before 'putWeights' or 'fromJSON' was called.");if(t.length!==this.num_neurons_per_layer[0])throw new Error(`Expected ${this.num_neurons_per_layer[0]} inputs, got ${t.length}.`);let s,e=t;for(let t=1;t<this.num_neurons_per_layer.length;t++){s=[];for(let i=0;i<this.num_neurons_per_layer[t];i++){let o=this.getBias(t,i);for(let s=0;s<this.num_neurons_per_layer[t-1];s++)o+=this.getWeight(t,i,s)*e[s];s[i]=1/(1+Math.exp(-o))}e=s}return s}run(...t){return this.feedforward(t)}computeOffsets(){this.offsets=[0];let t=0;for(let s=1;s<this.num_neurons_per_layer.length-1;s++)this.offsets.push(t+=this.num_neurons_per_layer[s-1]*(this.num_neurons_per_layer[s]+1))}putWeights(t,s){this.num_neurons_per_layer=t,this.computeOffsets();let e=i.weightsCount(t);if(e!==s.length)throw new Error(`The number of weights do not match the given architecture, expected ${e}, got ${s.length}.`);this.weights_and_biases=s}static weightsCount(t){let s=0;for(let e=1;e<t.length;e++)s+=t[e]*(t[e-1]+1);return s}toJSON(){return{weights_and_biases:this.weights_and_biases,layers:this.num_neurons_per_layer}}toFunction(){return{args:["inputs"],body:`\n            var json = ${JSON.stringify(this.toJSON())};\n\n            if (inputs.length !== json.layers[0])\n                throw new Error('Expected ' + json.layers[0] + ' inputs, got ' + inputs.length + '.');\n\n            var offsets = ${JSON.stringify(this.offsets)}, a = inputs, output;\n\n            for (var l = 1; l < json.layers.length; l++) {\n                output = [];\n                for (var j = 0; j < json.layers[l]; j++) {\n                    var z = json.weights_and_biases[offsets[l - 1] + j * (json.layers[l - 1] + 1)]; \n                    for (var k = 0; k < json.layers[l - 1]; k++)\n                        z += json.weights_and_biases[offsets[l - 1] + j * (json.layers[l - 1] + 1) + k + 1] * a[k];\n                    output[j] = 1 / (1 + Math.exp(-z));\n                }\n                a = output;\n            }\n\n            return output;\n        `}}static fromJSON(t){const s=new i;return s.putWeights(t.layers,t.weights_and_biases),s}static fromWeights(t,s){const e=new i;return e.putWeights(t,s),e}}s.NeuralNet=i},function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});class i{constructor(t,s){this.x=t,this.y=s}add(t){return new i(this.x+t.x,this.y+t.y)}sub(t){return new i(this.x-t.x,this.y-t.y)}plus(t){this.x+=t.x,this.y+=t.y}minus(t){this.x-=t.x,this.y-=t.y}dot(t){return this.x*t.x+this.y*t.y}hadamard(t){return t instanceof i?new i(this.x*t.x,this.y*t.y):new i(this.x*t[0],this.y*t[1])}norm(){return Math.pow(this.dot(this),.5)}norm_sq(){return this.dot(this)}times(t){return new i(this.x*t,this.y*t)}normalize(){return this.times(1/this.norm())}dist(t){return this.sub(t).norm()}dist_sq(t){return this.sub(t).norm_sq()}map(t){return new i(t(this.x),t(this.y))}angle(){return Math.atan2(this.y,this.x)}toArray(){return[this.x,this.y]}fromArray(t){return new i(t[0],t[1])}static fill(t){return new i(t,t)}static zeroes(){return i.fill(0)}static ones(){return i.fill(1)}static rand(){return new i(Math.random(),Math.random())}static clone(t){return new i(t.x,t.y)}}s.Vector2D=i}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL0Nyb3Nzb3Zlck1ldGhvZHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL011dGF0aW9uTWV0aG9kLnRzIiwid2VicGFjazovLy8uL3NyYy9EZW1vcy9TbWFydEVhdGVycy9NYXRoVXRpbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0RlbW9zL1NtYXJ0RWF0ZXJzL01haW4udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0RlbW9zL1NtYXJ0RWF0ZXJzL1NtYXJ0RWF0ZXJzLnRzIiwid2VicGFjazovLy8uL3NyYy9EYXJ3aW4udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0Nocm9tb3NvbWUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0V2ZW50RW1pdHRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVXRpbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0RlbW9zL1NtYXJ0RWF0ZXJzL0VhdGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9EZW1vcy9TbWFydEVhdGVycy9OZXVyYWxOZXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0RlbW9zL1NtYXJ0RWF0ZXJzL1ZlY3RvcjJELnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiQ3Jvc3NvdmVyTWV0aG9kIiwiTXV0YXRpb25NZXRob2QiLCJNYXRoVXRpbHMiLCJjbGFtcCIsIm1pbiIsIm1heCIsIm1hcCIsInN0YXJ0MSIsInN0b3AxIiwic3RhcnQyIiwic3RvcDIiLCJUV09fUEkiLCJNYXRoIiwiUEkiLCJDcm9zc292ZXJNZXRob2RzXzEiLCJTbWFydEVhdGVyc18xIiwiY252IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwid2lkdGgiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiRFBSIiwiaGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJzdHlsZSIsImdldENvbnRleHQiLCJzY2FsZSIsImJvZHkiLCJwYWRkaW5nIiwibWFyZ2luIiwiYXBwZW5kQ2hpbGQiLCJlYXRlcnMiLCJTbWFydEVhdGVycyIsImVsaXRlX2NvdW50IiwiZWxpdGVfY29waWVzIiwidGlja3NfcGVyX2dlbiIsInBvcHVsYXRpb25fc2l6ZSIsImZvb2RfY291bnQiLCJjcm9zc292ZXJfbWV0aG9kIiwiVFdPX1BPSU5UIiwid3JhcF9ib3JkZXJzIiwibXV0YXRpb25fcmF0ZSIsImhpZGRlbl9sYXllcnNfc2l6ZXMiLCJydW4iLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInBhdXNlIiwiZm9sbG93X2ZpdHRlc3QiLCJmYXN0X21vZGVfcmVmcmVzaF9yYXRlIiwic2hvd19saW5lcyIsImhpZGVfbm9uX3NlbGVjdGVkIiwic2VsZWN0ZWRJZHgiLCJicmFpbiIsImdldEVhdGVyQnJhaW4iLCJiIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwiQmxvYiIsIkpTT04iLCJzdHJpbmdpZnkiLCJwYXJhbWV0ZXJzIiwib3BlbiIsInRvZ2dsZUZhc3RNb2RlIiwiRGFyd2luXzEiLCJFYXRlcl8xIiwiTmV1cmFsTmV0XzEiLCJWZWN0b3IyRF8xIiwiTWF0aFV0aWxzXzEiLCJkZXZpY2VQaXhlbFJhdGlvIiwiW29iamVjdCBPYmplY3RdIiwicGFyYW1zIiwidGhpcyIsInRpY2tzIiwic2VsZWN0ZWRfaWR4IiwicGF1c2VkIiwiZmFzdF9tb2RlIiwic3RvcF9tYXRpbmciLCJjdHgiLCJjaG9vc2UiLCJhIiwidW5kZWZpbmVkIiwiY3Jvc3NvdmVyX3JhdGUiLCJtYXhfc3BlZWQiLCJtYXhfdHVybl9yYXRlIiwiU0lOR0xFX1BPSU5UIiwiZWF0ZXJfc2l6ZSIsImZvb2Rfc2l6ZSIsImxheWVyX3NpemVzIiwiTmV1cmFsTmV0IiwiZ2VuZXRpY3MiLCJEYXJ3aW4iLCJyYW5kX2Z1bmMiLCJyYW5kb20iLCJjaHJvbW9zb21lX2xlbmd0aCIsIndlaWdodHNDb3VudCIsInBvcHVsYXRpb24iLCJnZXRQb3B1bGF0aW9uIiwiXyIsImlkeCIsIkVhdGVyIiwicmFuZG9tUG9zIiwibW91c2VfcG9zIiwiVmVjdG9yMkQiLCJjbGllbnRYIiwiY2xpZW50WSIsImNsb3Nlc3RfZWF0ZXJfaWR4IiwiY2xvc2VzdF9lYXRlcl9kaXN0IiwiSW5maW5pdHkiLCJsZW5ndGgiLCJkaXN0X3NxIiwicG9zaXRpb24iLCJwb3ciLCJzZXRTZWxlY3RlZCIsInNwYXduRm9vZCIsImZvb2QiLCJwdXNoIiwicmFuZCIsImhhZGFtYXJkIiwiZWF0ZXIiLCJjbG9zZXN0X2lkeCIsImNsb3Nlc3RfZGlzdF9zcSIsImRpc3QiLCJpbmRleCIsIm5leHRHZW5lcmF0aW9uIiwiY2hyb21vIiwiZ2V0Q2hyb21vc29tZUlkeCIsInB1dFdlaWdodHMiLCJnZXRCaXRzIiwiY2xvc2VzdF9mb29kIiwiZ2V0Q2xvc2VzdEZvb2QiLCJjbG9uZSIsImZvb2RfbCIsImZvb2RfciIsInN1YiIsIm5vcm1hbGl6ZSIsInRvQXJyYXkiLCJmIiwiZ2V0Rml0bmVzcyIsInNldEZpdG5lc3MiLCJsb29rYXQiLCJjb3MiLCJhbmdsZSIsInNpbiIsInR1cm5fbGVmdCIsInR1cm5fcmlnaHQiLCJyb3RfZm9yY2UiLCJmb29kX2RpciIsInBsdXMiLCJ0aW1lcyIsInBvcyIsIngiLCJ5IiwibWF0ZSIsInVwZGF0ZSIsInRpY2siLCJyZW5kZXIiLCJzZXRUaW1lb3V0IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwidXBkYXRlU3RhdHMiLCJjbGVhclJlY3QiLCJkcmF3Rm9vZCIsImRyYXdFYXRlcnMiLCJoaWdobGlnaHRTZWxlY3RlZEVhdGVyIiwiZHJhd0dlbmVyYXRpb25JbmZvIiwiYmVzdCIsImdldEZpdHRlc3QiLCJsb2cyIiwiZmlsbFN0eWxlIiwiZmlsbFRleHQiLCJnZXRHZW5lcmF0aW9uIiwiZ2V0QXZlcmFnZUZpdG5lc3MiLCJ0b0ZpeGVkIiwiZ2V0U3RhdHMiLCJmaXR0ZXN0X2lkeCIsImxpbmVXaWR0aCIsInN0cm9rZVN0eWxlIiwiYmVnaW5QYXRoIiwiYXJjIiwic3Ryb2tlIiwiY2xvc2VQYXRoIiwibW92ZVRvIiwiYWRkIiwibGluZVRvIiwiYzEiLCJjMiIsImZpdG5lc3MiLCJmbG9vciIsImxhIiwidSIsInYiLCJwMSIsInAyIiwiZmlsbCIsImZzIiwiZmlsbFJlY3QiLCJmcm9tV2VpZ2h0cyIsImdldENocm9tb3NvbWUiLCJ0b0Z1bmN0aW9uIiwiQ2hyb21vc29tZV8xIiwiTXV0YXRpb25NZXRob2RfMSIsIlV0aWxzXzEiLCJnZW5lcmF0aW9uIiwib25fZml0bmVzc191cGRhdGUiLCJzdGF0cyIsIm5lZWRzX3VwZGF0ZSIsIkNocm9tb3NvbWUiLCJvbiIsImFzc2lnbiIsIm11dGF0aW9uX21ldGhvZCIsIkZMSVAiLCJmaXR0ZXN0IiwiYXZnX2ZpdG5lc3MiLCJzdW1fZml0bmVzcyIsIm5ld19wb3AiLCJlbGl0ZSIsImdldFRvcENocm9tb3NvbWVzIiwiaiIsIm11bSIsImdldFJhbmRvbUNocm9tb3NvbWUiLCJkYWQiLCJiYWJpZXMiLCJjcm9zc292ZXIiLCJiYWJ5MSIsImJhYnkyIiwicG9wIiwibXV0YXRlIiwiZml0bmVzc19ldmFsdWF0b3IiLCJkdXBsaWNhdGVFbGl0ZSIsImFjY19maXRuZXNzIiwiY291bnQiLCJwYXJ0aWFsUXVpY2tTb3J0Iiwic2xpY2UiLCJmb3JjZV91cGRhdGUiLCJtYXhfZml0bmVzcyIsIkV2ZW50RW1pdHRlcl8xIiwiRXZlbnRFbWl0dGVyIiwibGVuZ3RoX29yX2JpdHMiLCJzdXBlciIsImJpdHMiLCJlbWl0IiwiYm9iIiwibXV0X3JhdGUiLCJ0bXAiLCJtZXRob2QiLCJtdXRhdGVfZmxpcCIsIlNXQVAiLCJtdXRhdGVfc3dhcCIsInNldEJpdHMiLCJiMSIsImIyIiwic3dhcCIsImRpZmZfYml0cyIsIk4iLCJzcGxpY2UiLCJpbmYiLCJzdXAiLCJpbmRleE9mIiwiY3Jvc3NvdmVyX3NpbmdsZV9wb2ludCIsImNyb3Nzb3Zlcl90d29fcG9pbnQiLCJVTklGT1JNIiwiY3Jvc3NvdmVyX3VuaWZvcm0iLCJIQUxGX1VOSUZPUk0iLCJjcm9zc292ZXJfaGFsZl91bmlmb3JtIiwiT1JERVJFRCIsImNyb3Nzb3Zlcl9vcmRlcmVkIiwiRXJyb3IiLCJjb3B5IiwiaGFuZGxlcnMiLCJNYXAiLCJldiIsImhhbmRsZXIiLCJoYXMiLCJzZXQiLCJlbSIsImFycmF5IiwiayIsInBhcnRpYWxfcXVpY2tzb3J0IiwibGVmdCIsInJpZ2h0IiwicGl2b3QiLCJwaXZvdF92YWx1ZSIsInBhcnRpdGlvbiIsImNocm9tb3NvbWVJZHgiLCJfcG9zIiwiX2FuZ2xlIiwibmV3X3BvcyIsIndlaWdodHNfYW5kX2JpYXNlcyIsIm9mZnNldHMiLCJudW1fbmV1cm9uc19wZXJfbGF5ZXIiLCJpbnB1dHMiLCJvdXRwdXQiLCJ6IiwiZ2V0QmlhcyIsImdldFdlaWdodCIsImV4cCIsImZlZWRmb3J3YXJkIiwib2Zmc2V0IiwiY29tcHV0ZU9mZnNldHMiLCJsYXllcnMiLCJhcmdzIiwidG9KU09OIiwianNvbiIsIk5OIiwiZG90Iiwibm9ybSIsIm5vcm1fc3EiLCJhdGFuMiIsImFyciJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxJQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFlBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUs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QUFBK0UsR0FFQWpGLFVBQ0EsT0FBQUUsS0FBQStFLEVBQUEvRSxLQUFBZ0YsR0FFQWxGLFVBQUE4TyxHQUNBLFdBQUE3TSxFQUFBNk0sRUFBQSxHQUFBQSxFQUFBLElBRUE5TyxZQUFBN0UsR0FDQSxXQUFBOEcsRUFBQTlHLEtBRUE2RSxnQkFDQSxPQUFBaUMsRUFBQTBGLEtBQUEsR0FFQTNILGNBQ0EsT0FBQWlDLEVBQUEwRixLQUFBLEdBRUEzSCxjQUNBLFdBQUFpQyxFQUFBM0YsS0FBQWlGLFNBQUFqRixLQUFBaUYsVUFFQXZCLGFBQUF3SCxHQUNBLFdBQUF2RixFQUFBdUYsRUFBQXZDLEVBQUF1QyxFQUFBdEMsSUFHQTFMLEVBQUF5SSIsImZpbGUiOiJlYXRlcnMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMyk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBDcm9zc292ZXJNZXRob2Q7XG4oZnVuY3Rpb24gKENyb3Nzb3Zlck1ldGhvZCkge1xuICAgIENyb3Nzb3Zlck1ldGhvZFtDcm9zc292ZXJNZXRob2RbXCJTSU5HTEVfUE9JTlRcIl0gPSAwXSA9IFwiU0lOR0xFX1BPSU5UXCI7XG4gICAgQ3Jvc3NvdmVyTWV0aG9kW0Nyb3Nzb3Zlck1ldGhvZFtcIlRXT19QT0lOVFwiXSA9IDFdID0gXCJUV09fUE9JTlRcIjtcbiAgICBDcm9zc292ZXJNZXRob2RbQ3Jvc3NvdmVyTWV0aG9kW1wiVU5JRk9STVwiXSA9IDJdID0gXCJVTklGT1JNXCI7XG4gICAgQ3Jvc3NvdmVyTWV0aG9kW0Nyb3Nzb3Zlck1ldGhvZFtcIkhBTEZfVU5JRk9STVwiXSA9IDNdID0gXCJIQUxGX1VOSUZPUk1cIjtcbiAgICBDcm9zc292ZXJNZXRob2RbQ3Jvc3NvdmVyTWV0aG9kW1wiT1JERVJFRFwiXSA9IDRdID0gXCJPUkRFUkVEXCI7XG59KShDcm9zc292ZXJNZXRob2QgPSBleHBvcnRzLkNyb3Nzb3Zlck1ldGhvZCB8fCAoZXhwb3J0cy5Dcm9zc292ZXJNZXRob2QgPSB7fSkpO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgTXV0YXRpb25NZXRob2Q7XG4oZnVuY3Rpb24gKE11dGF0aW9uTWV0aG9kKSB7XG4gICAgTXV0YXRpb25NZXRob2RbTXV0YXRpb25NZXRob2RbXCJGTElQXCJdID0gMF0gPSBcIkZMSVBcIjtcbiAgICBNdXRhdGlvbk1ldGhvZFtNdXRhdGlvbk1ldGhvZFtcIlNXQVBcIl0gPSAxXSA9IFwiU1dBUFwiO1xufSkoTXV0YXRpb25NZXRob2QgPSBleHBvcnRzLk11dGF0aW9uTWV0aG9kIHx8IChleHBvcnRzLk11dGF0aW9uTWV0aG9kID0ge30pKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIE1hdGhVdGlscztcbihmdW5jdGlvbiAoTWF0aFV0aWxzKSB7XG4gICAgTWF0aFV0aWxzLmNsYW1wID0gKHZhbHVlLCBtaW4sIG1heCkgPT4ge1xuICAgICAgICBpZiAodmFsdWUgPj0gbWluICYmIHZhbHVlIDw9IG1heClcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgaWYgKHZhbHVlIDwgbWluKVxuICAgICAgICAgICAgcmV0dXJuIG1pbjtcbiAgICAgICAgcmV0dXJuIG1heDtcbiAgICB9O1xuICAgIE1hdGhVdGlscy5tYXAgPSAodmFsdWUsIHN0YXJ0MSwgc3RvcDEsIHN0YXJ0Miwgc3RvcDIpID0+IHtcbiAgICAgICAgcmV0dXJuICgodmFsdWUgLSBzdGFydDEpIC8gKHN0b3AxIC0gc3RhcnQxKSkgKiAoc3RvcDIgLSBzdGFydDIpICsgc3RhcnQyO1xuICAgIH07XG4gICAgTWF0aFV0aWxzLlRXT19QSSA9IDIgKiBNYXRoLlBJO1xufSkoTWF0aFV0aWxzID0gZXhwb3J0cy5NYXRoVXRpbHMgfHwgKGV4cG9ydHMuTWF0aFV0aWxzID0ge30pKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgQ3Jvc3NvdmVyTWV0aG9kc18xID0gcmVxdWlyZShcIi4uLy4uL0Nyb3Nzb3Zlck1ldGhvZHNcIik7XG5jb25zdCBTbWFydEVhdGVyc18xID0gcmVxdWlyZShcIi4vU21hcnRFYXRlcnNcIik7XG5jb25zdCBjbnYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbmNudi53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoICogU21hcnRFYXRlcnNfMS5EUFI7XG5jbnYuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0ICogU21hcnRFYXRlcnNfMS5EUFI7XG5jbnYuc3R5bGUud2lkdGggPSBgJHt3aW5kb3cuaW5uZXJXaWR0aH1weGA7XG5jbnYuc3R5bGUuaGVpZ2h0ID0gYCR7d2luZG93LmlubmVySGVpZ2h0fXB4YDtcbmNudi5nZXRDb250ZXh0KCcyZCcpLnNjYWxlKFNtYXJ0RWF0ZXJzXzEuRFBSLCBTbWFydEVhdGVyc18xLkRQUik7XG5kb2N1bWVudC5ib2R5LnN0eWxlLnBhZGRpbmcgPSAnMCc7XG5kb2N1bWVudC5ib2R5LnN0eWxlLm1hcmdpbiA9ICcwJztcbmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY252KTtcbmNvbnN0IGVhdGVycyA9IG5ldyBTbWFydEVhdGVyc18xLlNtYXJ0RWF0ZXJzKGNudiwge1xuICAgIGVsaXRlX2NvdW50OiA1LFxuICAgIGVsaXRlX2NvcGllczogMixcbiAgICB0aWNrc19wZXJfZ2VuOiAyMDAwLFxuICAgIHBvcHVsYXRpb25fc2l6ZTogMTAwLFxuICAgIGZvb2RfY291bnQ6IDEyMCxcbiAgICBjcm9zc292ZXJfbWV0aG9kOiBDcm9zc292ZXJNZXRob2RzXzEuQ3Jvc3NvdmVyTWV0aG9kLlRXT19QT0lOVCxcbiAgICB3cmFwX2JvcmRlcnM6IHRydWUsXG4gICAgbXV0YXRpb25fcmF0ZTogMC4wMixcbiAgICBoaWRkZW5fbGF5ZXJzX3NpemVzOiBbOF1cbn0pO1xuZWF0ZXJzLnJ1bigpO1xud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcbiAgICBjbnYuc3R5bGUud2lkdGggPSBgJHt3aW5kb3cuaW5uZXJXaWR0aH1weGA7XG4gICAgY252LnN0eWxlLmhlaWdodCA9IGAke3dpbmRvdy5pbm5lckhlaWdodH1weGA7XG4gICAgY252LndpZHRoID0gd2luZG93LmlubmVyV2lkdGggKiBTbWFydEVhdGVyc18xLkRQUjtcbiAgICBjbnYuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0ICogU21hcnRFYXRlcnNfMS5EUFI7XG4gICAgY252LmdldENvbnRleHQoJzJkJykuc2NhbGUoU21hcnRFYXRlcnNfMS5EUFIsIFNtYXJ0RWF0ZXJzXzEuRFBSKTtcbn0pO1xud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgZSA9PiB7XG4gICAgc3dpdGNoIChlLmtleSkge1xuICAgICAgICBjYXNlIFwiIFwiOiAvL1NQQUNFXG4gICAgICAgICAgICBlYXRlcnMucGF1c2UoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiZlwiOiAvL2ZvbGxvdyB0aGUgZml0dGVzdCBlYXRlclxuICAgICAgICAgICAgZWF0ZXJzLmZvbGxvd19maXR0ZXN0ID0gIWVhdGVycy5mb2xsb3dfZml0dGVzdDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwicFwiOiAvL2RlY3JlbWVudCBmcmVzaCByYXRlXG4gICAgICAgICAgICBlYXRlcnMuZmFzdF9tb2RlX3JlZnJlc2hfcmF0ZSArPSAyO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJtXCI6IC8vaW5jcmVtZW50IGZyZXNoIHJhdGVcbiAgICAgICAgICAgIGVhdGVycy5mYXN0X21vZGVfcmVmcmVzaF9yYXRlIC09IDI7XG4gICAgICAgICAgICBpZiAoZWF0ZXJzLmZhc3RfbW9kZV9yZWZyZXNoX3JhdGUgPCAxKVxuICAgICAgICAgICAgICAgIGVhdGVycy5mYXN0X21vZGVfcmVmcmVzaF9yYXRlID0gMTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwibFwiOiAvL2RyYXcgbGluZXMgdG8gdGhlIG5lYXJlc3QgZm9vZCBmb3IgZWFjaCBlYXRlclxuICAgICAgICAgICAgZWF0ZXJzLnNob3dfbGluZXMgPSAhZWF0ZXJzLnNob3dfbGluZXM7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImhcIjogLy9oaWRlIGFsbCBlYXRlcnMgYnV0IHRoZSBzZWxlY3RlZCBvbmVcbiAgICAgICAgICAgIGVhdGVycy5oaWRlX25vbl9zZWxlY3RlZCA9ICFlYXRlcnMuaGlkZV9ub25fc2VsZWN0ZWQ7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImFcIjogLy9pc29sYXRlIHRoZSBzZWxlY3RlZCBlYXRlclxuICAgICAgICAgICAgaWYgKGVhdGVycy5zZWxlY3RlZElkeCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJyYWluID0gZWF0ZXJzLmdldEVhdGVyQnJhaW4oZWF0ZXJzLnNlbGVjdGVkSWR4KTtcbiAgICAgICAgICAgICAgICBjb25zdCBiID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW2BcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIFwicGFyYW1zXCI6ICR7SlNPTi5zdHJpbmdpZnkoZWF0ZXJzLnBhcmFtZXRlcnMpfSxcbiAgICAgICAgICAgICAgICAgICAgXCJicmFpblwiOiAke0pTT04uc3RyaW5naWZ5KGJyYWluKX1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYF0pKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cub3BlbihgYW5hbHlzaXMuaHRtbD9iPSR7Yn1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgZWF0ZXJzLnRvZ2dsZUZhc3RNb2RlKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG59KTtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgQ3Jvc3NvdmVyTWV0aG9kc18xID0gcmVxdWlyZShcIi4uLy4uL0Nyb3Nzb3Zlck1ldGhvZHNcIik7XG5jb25zdCBEYXJ3aW5fMSA9IHJlcXVpcmUoXCIuLi8uLi9EYXJ3aW5cIik7XG5jb25zdCBFYXRlcl8xID0gcmVxdWlyZShcIi4vRWF0ZXJcIik7XG5jb25zdCBOZXVyYWxOZXRfMSA9IHJlcXVpcmUoXCIuL05ldXJhbE5ldFwiKTtcbmNvbnN0IFZlY3RvcjJEXzEgPSByZXF1aXJlKFwiLi9WZWN0b3IyRFwiKTtcbmNvbnN0IE1hdGhVdGlsc18xID0gcmVxdWlyZShcIi4vTWF0aFV0aWxzXCIpO1xuZXhwb3J0cy5EUFIgPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbmNsYXNzIFNtYXJ0RWF0ZXJzIHtcbiAgICBjb25zdHJ1Y3RvcihjbnYsIHBhcmFtcykge1xuICAgICAgICB0aGlzLnRpY2tzID0gMDtcbiAgICAgICAgdGhpcy5zZWxlY3RlZF9pZHggPSAtMTtcbiAgICAgICAgdGhpcy5mb2xsb3dfZml0dGVzdCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnBhdXNlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmZhc3RfbW9kZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmZhc3RfbW9kZV9yZWZyZXNoX3JhdGUgPSAyO1xuICAgICAgICB0aGlzLnNob3dfbGluZXMgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5oaWRlX25vbl9zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnN0b3BfbWF0aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY252ID0gY252O1xuICAgICAgICB0aGlzLmN0eCA9IHRoaXMuY252LmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgIGxldCBjaG9vc2UgPSAoYSwgYikgPT4ge1xuICAgICAgICAgICAgaWYgKGEgPT09IG51bGwgfHwgYSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHJldHVybiBiO1xuICAgICAgICAgICAgcmV0dXJuIGE7XG4gICAgICAgIH07XG4gICAgICAgIC8vZGVmYXVsdCBwYXJhbXNcbiAgICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXMgfHwge307XG4gICAgICAgIHRoaXMucGFyYW1zLnBvcHVsYXRpb25fc2l6ZSA9IHRoaXMucGFyYW1zLnBvcHVsYXRpb25fc2l6ZSB8fCAzMDtcbiAgICAgICAgdGhpcy5wYXJhbXMuaGlkZGVuX2xheWVyc19zaXplcyA9IHRoaXMucGFyYW1zLmhpZGRlbl9sYXllcnNfc2l6ZXMgfHwgWzZdO1xuICAgICAgICB0aGlzLnBhcmFtcy5mb29kX2NvdW50ID0gdGhpcy5wYXJhbXMuZm9vZF9jb3VudCB8fCA0MDtcbiAgICAgICAgdGhpcy5wYXJhbXMuY3Jvc3NvdmVyX3JhdGUgPSBjaG9vc2UodGhpcy5wYXJhbXMuY3Jvc3NvdmVyX3JhdGUsIDAuNyk7XG4gICAgICAgIHRoaXMucGFyYW1zLm11dGF0aW9uX3JhdGUgPSBjaG9vc2UodGhpcy5wYXJhbXMubXV0YXRpb25fcmF0ZSwgMC4xKTtcbiAgICAgICAgdGhpcy5wYXJhbXMuZWxpdGVfY291bnQgPSBjaG9vc2UodGhpcy5wYXJhbXMuZWxpdGVfY291bnQsIDQpO1xuICAgICAgICB0aGlzLnBhcmFtcy5lbGl0ZV9jb3BpZXMgPSBjaG9vc2UodGhpcy5wYXJhbXMuZWxpdGVfY29waWVzLCAxKTtcbiAgICAgICAgdGhpcy5wYXJhbXMubWF4X3NwZWVkID0gdGhpcy5wYXJhbXMubWF4X3NwZWVkIHx8IDI7XG4gICAgICAgIHRoaXMucGFyYW1zLm1heF90dXJuX3JhdGUgPSB0aGlzLnBhcmFtcy5tYXhfdHVybl9yYXRlIHx8IDAuMztcbiAgICAgICAgdGhpcy5wYXJhbXMudGlja3NfcGVyX2dlbiA9IHRoaXMucGFyYW1zLnRpY2tzX3Blcl9nZW4gfHwgMTAwMDtcbiAgICAgICAgdGhpcy5wYXJhbXMuY3Jvc3NvdmVyX21ldGhvZCA9IGNob29zZSh0aGlzLnBhcmFtcy5jcm9zc292ZXJfbWV0aG9kLCBDcm9zc292ZXJNZXRob2RzXzEuQ3Jvc3NvdmVyTWV0aG9kLlNJTkdMRV9QT0lOVCk7XG4gICAgICAgIHRoaXMucGFyYW1zLmVhdGVyX3NpemUgPSB0aGlzLnBhcmFtcy5lYXRlcl9zaXplIHx8IDEyO1xuICAgICAgICB0aGlzLnBhcmFtcy5mb29kX3NpemUgPSB0aGlzLnBhcmFtcy5mb29kX3NpemUgfHwgNTtcbiAgICAgICAgdGhpcy5wYXJhbXMud3JhcF9ib3JkZXJzID0gY2hvb3NlKHRoaXMucGFyYW1zLndyYXBfYm9yZGVycywgdHJ1ZSk7XG4gICAgICAgIHRoaXMubGF5ZXJfc2l6ZXMgPSBbNCwgLi4udGhpcy5wYXJhbXMuaGlkZGVuX2xheWVyc19zaXplcywgMl07XG4gICAgICAgIHRoaXMuYnJhaW4gPSBuZXcgTmV1cmFsTmV0XzEuTmV1cmFsTmV0KCk7XG4gICAgICAgIHRoaXMuZ2VuZXRpY3MgPSBuZXcgRGFyd2luXzEuRGFyd2luKHtcbiAgICAgICAgICAgIHBvcHVsYXRpb25fc2l6ZTogdGhpcy5wYXJhbXMucG9wdWxhdGlvbl9zaXplLFxuICAgICAgICAgICAgcmFuZF9mdW5jOiAoKSA9PiAoTWF0aC5yYW5kb20oKSAqIDIpIC0gMSxcbiAgICAgICAgICAgIGNocm9tb3NvbWVfbGVuZ3RoOiBOZXVyYWxOZXRfMS5OZXVyYWxOZXQud2VpZ2h0c0NvdW50KHRoaXMubGF5ZXJfc2l6ZXMpXG4gICAgICAgIH0pO1xuICAgICAgICAvL0Fzc29jaWF0ZSBlYWNoIGNocm9tb3NvbWUgdG8gYSBFYXRlclxuICAgICAgICB0aGlzLnBvcHVsYXRpb24gPSB0aGlzLmdlbmV0aWNzLmdldFBvcHVsYXRpb24oKS5tYXAoKF8sIGlkeCkgPT4gbmV3IEVhdGVyXzEuRWF0ZXIodGhpcy5yYW5kb21Qb3MoKSwgTWF0aC5yYW5kb20oKSAqIE1hdGhVdGlsc18xLk1hdGhVdGlscy5UV09fUEksIGlkeCkpO1xuICAgICAgICB0aGlzLmNudi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtb3VzZV9wb3MgPSBuZXcgVmVjdG9yMkRfMS5WZWN0b3IyRChlLmNsaWVudFggKiBleHBvcnRzLkRQUiwgZS5jbGllbnRZICogZXhwb3J0cy5EUFIpO1xuICAgICAgICAgICAgbGV0IGNsb3Nlc3RfZWF0ZXJfaWR4ID0gMCwgY2xvc2VzdF9lYXRlcl9kaXN0ID0gSW5maW5pdHk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucG9wdWxhdGlvbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpc3Rfc3EgPSB0aGlzLnBvcHVsYXRpb25baV0ucG9zaXRpb24uZGlzdF9zcShtb3VzZV9wb3MpO1xuICAgICAgICAgICAgICAgIGlmIChkaXN0X3NxIDwgY2xvc2VzdF9lYXRlcl9kaXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNsb3Nlc3RfZWF0ZXJfZGlzdCA9IGRpc3Rfc3E7XG4gICAgICAgICAgICAgICAgICAgIGNsb3Nlc3RfZWF0ZXJfaWR4ID0gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoTWF0aC5wb3coY2xvc2VzdF9lYXRlcl9kaXN0LCAwLjUpIDwgdGhpcy5wYXJhbXMuZWF0ZXJfc2l6ZSAqIDIgKiBleHBvcnRzLkRQUikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0ZWQoY2xvc2VzdF9lYXRlcl9pZHgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZF9pZHggPSAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc3Bhd25Gb29kKCk7XG4gICAgfVxuICAgIHNwYXduRm9vZCgpIHtcbiAgICAgICAgdGhpcy5mb29kID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5wYXJhbXMuZm9vZF9jb3VudDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmZvb2QucHVzaCh0aGlzLnJhbmRvbVBvcygpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByYW5kb21Qb3MoKSB7XG4gICAgICAgIHJldHVybiBWZWN0b3IyRF8xLlZlY3RvcjJELnJhbmQoKS5oYWRhbWFyZChbdGhpcy5jbnYud2lkdGgsIHRoaXMuY252LmhlaWdodF0pO1xuICAgIH1cbiAgICBnZXRDbG9zZXN0Rm9vZChlYXRlcikge1xuICAgICAgICBsZXQgY2xvc2VzdF9pZHggPSAwLCBjbG9zZXN0X2Rpc3Rfc3EgPSBJbmZpbml0eTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmZvb2QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGRpc3QgPSBlYXRlci5wb3NpdGlvbi5kaXN0X3NxKHRoaXMuZm9vZFtpXSk7XG4gICAgICAgICAgICBpZiAoZGlzdCA8IGNsb3Nlc3RfZGlzdF9zcSkge1xuICAgICAgICAgICAgICAgIGNsb3Nlc3RfZGlzdF9zcSA9IGRpc3Q7XG4gICAgICAgICAgICAgICAgY2xvc2VzdF9pZHggPSBpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpbmRleDogY2xvc2VzdF9pZHgsXG4gICAgICAgICAgICBkaXN0OiBNYXRoLnBvdyhjbG9zZXN0X2Rpc3Rfc3EsIDAuNSlcbiAgICAgICAgfTtcbiAgICB9XG4gICAgdGljaygpIHtcbiAgICAgICAgaWYgKHRoaXMucGF1c2VkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoKyt0aGlzLnRpY2tzID4gdGhpcy5wYXJhbXMudGlja3NfcGVyX2dlbikge1xuICAgICAgICAgICAgdGhpcy5uZXh0R2VuZXJhdGlvbigpO1xuICAgICAgICAgICAgdGhpcy50aWNrcyA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgLy9VcGRhdGUgcG9zaXRpb25zXG4gICAgICAgIGZvciAoY29uc3QgZWF0ZXIgb2YgdGhpcy5wb3B1bGF0aW9uKSB7XG4gICAgICAgICAgICBjb25zdCBjaHJvbW8gPSB0aGlzLmdlbmV0aWNzLmdldFBvcHVsYXRpb24oKVtlYXRlci5nZXRDaHJvbW9zb21lSWR4KCldO1xuICAgICAgICAgICAgdGhpcy5icmFpbi5wdXRXZWlnaHRzKHRoaXMubGF5ZXJfc2l6ZXMsIGNocm9tby5nZXRCaXRzKCkpO1xuICAgICAgICAgICAgY29uc3QgY2xvc2VzdF9mb29kID0gdGhpcy5nZXRDbG9zZXN0Rm9vZChlYXRlcik7XG4gICAgICAgICAgICBlYXRlci5jbG9zZXN0X2Zvb2QgPSBWZWN0b3IyRF8xLlZlY3RvcjJELmNsb25lKHRoaXMuZm9vZFtjbG9zZXN0X2Zvb2QuaW5kZXhdKTtcbiAgICAgICAgICAgIC8vZm9vZCBkaXJcbiAgICAgICAgICAgIGNvbnN0IFtmb29kX2wsIGZvb2Rfcl0gPSB0aGlzLmZvb2RbY2xvc2VzdF9mb29kLmluZGV4XS5zdWIoZWF0ZXIucG9zaXRpb24pLm5vcm1hbGl6ZSgpLnRvQXJyYXkoKTtcbiAgICAgICAgICAgIGlmIChjbG9zZXN0X2Zvb2QuZGlzdCA8ICh0aGlzLnBhcmFtcy5lYXRlcl9zaXplICsgdGhpcy5wYXJhbXMuZm9vZF9zaXplKSAvIDIpIHsgLy9zbmFjayB0aW1lIVxuICAgICAgICAgICAgICAgIGNvbnN0IGYgPSBjaHJvbW8uZ2V0Rml0bmVzcygpIHx8IDE7XG4gICAgICAgICAgICAgICAgY2hyb21vLnNldEZpdG5lc3MoMiAqIGYpO1xuICAgICAgICAgICAgICAgIHRoaXMuZm9vZFtjbG9zZXN0X2Zvb2QuaW5kZXhdID0gdGhpcy5yYW5kb21Qb3MoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vbG9va2F0XG4gICAgICAgICAgICBjb25zdCBsb29rYXQgPSBbXG4gICAgICAgICAgICAgICAgTWF0aC5jb3MoZWF0ZXIuYW5nbGUpLFxuICAgICAgICAgICAgICAgIE1hdGguc2luKGVhdGVyLmFuZ2xlKVxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGNvbnN0IFt0dXJuX2xlZnQsIHR1cm5fcmlnaHRdID0gdGhpcy5icmFpbi5ydW4oLi4ubG9va2F0LCBmb29kX2wsIGZvb2Rfcik7XG4gICAgICAgICAgICBjb25zdCByb3RfZm9yY2UgPSBNYXRoVXRpbHNfMS5NYXRoVXRpbHMuY2xhbXAodHVybl9sZWZ0IC0gdHVybl9yaWdodCwgLXRoaXMucGFyYW1zLm1heF90dXJuX3JhdGUsIHRoaXMucGFyYW1zLm1heF90dXJuX3JhdGUpO1xuICAgICAgICAgICAgZWF0ZXIuYW5nbGUgKz0gcm90X2ZvcmNlO1xuICAgICAgICAgICAgZWF0ZXIubG9va2F0ID0gbmV3IFZlY3RvcjJEXzEuVmVjdG9yMkQobG9va2F0WzBdLCBsb29rYXRbMV0pO1xuICAgICAgICAgICAgZWF0ZXIuZm9vZF9kaXIgPSBuZXcgVmVjdG9yMkRfMS5WZWN0b3IyRChmb29kX2wsIGZvb2Rfcik7XG4gICAgICAgICAgICBlYXRlci5wb3NpdGlvbi5wbHVzKGVhdGVyLmxvb2thdC50aW1lcyh0aGlzLnBhcmFtcy5tYXhfc3BlZWQgKiBleHBvcnRzLkRQUikpO1xuICAgICAgICAgICAgY29uc3QgcG9zID0gZWF0ZXIucG9zaXRpb247XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJhbXMud3JhcF9ib3JkZXJzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBvcy54ID4gdGhpcy5jbnYud2lkdGgpXG4gICAgICAgICAgICAgICAgICAgIHBvcy54ID0gMDtcbiAgICAgICAgICAgICAgICBpZiAocG9zLnggPCAwKVxuICAgICAgICAgICAgICAgICAgICBwb3MueCA9IHRoaXMuY252LndpZHRoO1xuICAgICAgICAgICAgICAgIGlmIChwb3MueSA+IHRoaXMuY252LmhlaWdodClcbiAgICAgICAgICAgICAgICAgICAgcG9zLnkgPSAwO1xuICAgICAgICAgICAgICAgIGlmIChwb3MueSA8IDApXG4gICAgICAgICAgICAgICAgICAgIHBvcy55ID0gdGhpcy5jbnYuaGVpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHBvcy54ID4gdGhpcy5jbnYud2lkdGgpXG4gICAgICAgICAgICAgICAgICAgIHBvcy54ID0gdGhpcy5jbnYud2lkdGg7XG4gICAgICAgICAgICAgICAgaWYgKHBvcy54IDwgMClcbiAgICAgICAgICAgICAgICAgICAgcG9zLnggPSAwO1xuICAgICAgICAgICAgICAgIGlmIChwb3MueSA+IHRoaXMuY252LmhlaWdodClcbiAgICAgICAgICAgICAgICAgICAgcG9zLnkgPSB0aGlzLmNudi5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgaWYgKHBvcy55IDwgMClcbiAgICAgICAgICAgICAgICAgICAgcG9zLnkgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHBhdXNlKCkge1xuICAgICAgICB0aGlzLnBhdXNlZCA9ICF0aGlzLnBhdXNlZDtcbiAgICB9XG4gICAgbmV4dEdlbmVyYXRpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLnN0b3BfbWF0aW5nKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLmdlbmV0aWNzLm1hdGUoKTtcbiAgICAgICAgLy8gcmVzZXQgZml0bmVzc1xuICAgICAgICBmb3IgKGNvbnN0IGVhdGVyIG9mIHRoaXMuZ2VuZXRpY3MuZ2V0UG9wdWxhdGlvbigpKSB7XG4gICAgICAgICAgICBlYXRlci5zZXRGaXRuZXNzKDApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3Bhd25Gb29kKCk7XG4gICAgICAgIGZvciAobGV0IGVhdGVyIG9mIHRoaXMucG9wdWxhdGlvbikge1xuICAgICAgICAgICAgZWF0ZXIucG9zaXRpb24gPSB0aGlzLnJhbmRvbVBvcygpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRfaWR4ID0gLTE7XG4gICAgfVxuICAgIHJ1bigpIHtcbiAgICAgICAgbGV0IHVwZGF0ZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudGljaygpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5mYXN0X21vZGUpXG4gICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHVwZGF0ZSk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCh1cGRhdGUsIDApO1xuICAgICAgICB9O1xuICAgICAgICB1cGRhdGUoKTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBpZiAodGhpcy5mYXN0X21vZGUgJiYgdGhpcy50aWNrcyAlIHRoaXMuZmFzdF9tb2RlX3JlZnJlc2hfcmF0ZSAhPT0gMClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5nZW5ldGljcy51cGRhdGVTdGF0cygpO1xuICAgICAgICB0aGlzLmN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy5jbnYud2lkdGgsIHRoaXMuY252LmhlaWdodCk7XG4gICAgICAgIHRoaXMuZHJhd0Zvb2QoKTtcbiAgICAgICAgdGhpcy5kcmF3RWF0ZXJzKCk7XG4gICAgICAgIHRoaXMuaGlnaGxpZ2h0U2VsZWN0ZWRFYXRlcigpO1xuICAgICAgICB0aGlzLmRyYXdHZW5lcmF0aW9uSW5mbygpO1xuICAgIH1cbiAgICBkcmF3R2VuZXJhdGlvbkluZm8oKSB7XG4gICAgICAgIGNvbnN0IGJlc3QgPSB0aGlzLmdlbmV0aWNzLmdldEZpdHRlc3QoKS5nZXRGaXRuZXNzKCkgIT09IDAgP1xuICAgICAgICAgICAgTWF0aC5sb2cyKHRoaXMuZ2VuZXRpY3MuZ2V0Rml0dGVzdCgpLmdldEZpdG5lc3MoKSkgOiAwO1xuICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSAnYmxhY2snO1xuICAgICAgICB0aGlzLmN0eC5maWxsVGV4dChgR2VuZXJhdGlvbjogJHt0aGlzLmdlbmV0aWNzLmdldEdlbmVyYXRpb24oKX1gLCA1LCAxMCk7XG4gICAgICAgIHRoaXMuY3R4LmZpbGxUZXh0KGBhdmc6ICR7TWF0aC5sb2cyKDEgKyB0aGlzLmdlbmV0aWNzLmdldEF2ZXJhZ2VGaXRuZXNzKCkpLnRvRml4ZWQoMyl9YCwgNSwgMjUpO1xuICAgICAgICB0aGlzLmN0eC5maWxsVGV4dChgYmVzdDogJHtiZXN0fWAsIDUsIDQwKTtcbiAgICAgICAgdGhpcy5jdHguZmlsbFRleHQoYHRpY2tzOiAke3RoaXMudGlja3N9IC8gJHt0aGlzLnBhcmFtcy50aWNrc19wZXJfZ2VufWAsIDUsIDU1KTtcbiAgICB9XG4gICAgaGlnaGxpZ2h0U2VsZWN0ZWRFYXRlcigpIHtcbiAgICAgICAgaWYgKHRoaXMuZm9sbG93X2ZpdHRlc3QpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRfaWR4ID0gdGhpcy5nZW5ldGljcy5nZXRTdGF0cygpLmZpdHRlc3RfaWR4O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkX2lkeCAhPT0gLTEgJiYgIXRoaXMuaGlkZV9ub25fc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuY3R4LmxpbmVXaWR0aCA9IDI7XG4gICAgICAgICAgICB0aGlzLmN0eC5zdHJva2VTdHlsZSA9ICdyZWQnO1xuICAgICAgICAgICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICBjb25zdCBlYXRlciA9IHRoaXMucG9wdWxhdGlvblt0aGlzLnNlbGVjdGVkX2lkeF07XG4gICAgICAgICAgICBjb25zdCBwb3MgPSBlYXRlci5wb3NpdGlvbjtcbiAgICAgICAgICAgIHRoaXMuY3R4LmFyYyhwb3MueCAvIGV4cG9ydHMuRFBSLCBwb3MueSAvIGV4cG9ydHMuRFBSLCB0aGlzLnBhcmFtcy5lYXRlcl9zaXplICogMiwgMCwgTWF0aFV0aWxzXzEuTWF0aFV0aWxzLlRXT19QSSk7XG4gICAgICAgICAgICB0aGlzLmN0eC5zdHJva2UoKTtcbiAgICAgICAgICAgIHRoaXMuY3R4LmNsb3NlUGF0aCgpO1xuICAgICAgICAgICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICB0aGlzLmN0eC5saW5lV2lkdGggPSAxO1xuICAgICAgICAgICAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSAnYmxhY2snO1xuICAgICAgICAgICAgdGhpcy5jdHgubW92ZVRvKHBvcy54IC8gZXhwb3J0cy5EUFIsIHBvcy55IC8gZXhwb3J0cy5EUFIpO1xuICAgICAgICAgICAgY29uc3QgZm9vZF9kaXIgPSBwb3MuYWRkKGVhdGVyLmZvb2RfZGlyLnRpbWVzKHRoaXMucGFyYW1zLmVhdGVyX3NpemUgKiAyICogZXhwb3J0cy5EUFIpKTtcbiAgICAgICAgICAgIHRoaXMuY3R4LmxpbmVUbyhmb29kX2Rpci54IC8gZXhwb3J0cy5EUFIsIGZvb2RfZGlyLnkgLyBleHBvcnRzLkRQUik7XG4gICAgICAgICAgICB0aGlzLmN0eC5zdHJva2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkcmF3RWF0ZXJzKCkge1xuICAgICAgICBjb25zdCBjMSA9IFs0NiwgMjA0LCAxMTNdO1xuICAgICAgICBjb25zdCBjMiA9IFsyNTUsIDAsIDBdO1xuICAgICAgICBjb25zdCBtYXggPSBNYXRoLmxvZzIodGhpcy5nZW5ldGljcy5nZXRGaXR0ZXN0KCkuZ2V0Rml0bmVzcygpKTtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IGVhdGVyIG9mIHRoaXMucG9wdWxhdGlvbikge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd19saW5lcykge1xuICAgICAgICAgICAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY3R4LmxpbmVXaWR0aCA9IDE7XG4gICAgICAgICAgICAgICAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSAnYmxhY2snO1xuICAgICAgICAgICAgICAgIHRoaXMuY3R4Lm1vdmVUbyhlYXRlci5wb3NpdGlvbi54IC8gZXhwb3J0cy5EUFIsIGVhdGVyLnBvc2l0aW9uLnkgLyBleHBvcnRzLkRQUik7XG4gICAgICAgICAgICAgICAgY29uc3QgZm9vZCA9IGVhdGVyLnBvc2l0aW9uLmFkZChlYXRlci5mb29kX2Rpci50aW1lcyhlYXRlci5wb3NpdGlvbi5kaXN0KGVhdGVyLmNsb3Nlc3RfZm9vZCkpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmN0eC5saW5lVG8oZm9vZC54IC8gZXhwb3J0cy5EUFIsIGZvb2QueSAvIGV4cG9ydHMuRFBSKTtcbiAgICAgICAgICAgICAgICB0aGlzLmN0eC5zdHJva2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmhpZGVfbm9uX3NlbGVjdGVkICYmIHRoaXMuc2VsZWN0ZWRfaWR4ICE9PSB1bmRlZmluZWQgJiYgaSsrICE9PSB0aGlzLnNlbGVjdGVkX2lkeClcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGNvbnN0IGZpdG5lc3MgPSBNYXRoLmxvZzIodGhpcy5nZW5ldGljcy5nZXRQb3B1bGF0aW9uKClbZWF0ZXIuZ2V0Q2hyb21vc29tZUlkeCgpXS5nZXRGaXRuZXNzKCkpO1xuICAgICAgICAgICAgY29uc3QgYyA9IFtcbiAgICAgICAgICAgICAgICBNYXRoVXRpbHNfMS5NYXRoVXRpbHMuY2xhbXAoTWF0aFV0aWxzXzEuTWF0aFV0aWxzLm1hcChmaXRuZXNzLCAwLCBtYXgsIGMxWzBdLCBjMlswXSksIE1hdGgubWluKGMxWzBdLCBjMlswXSksIE1hdGgubWF4KGMxWzBdLCBjMlswXSkpLFxuICAgICAgICAgICAgICAgIE1hdGhVdGlsc18xLk1hdGhVdGlscy5jbGFtcChNYXRoVXRpbHNfMS5NYXRoVXRpbHMubWFwKGZpdG5lc3MsIDAsIG1heCwgYzFbMV0sIGMyWzFdKSwgTWF0aC5taW4oYzFbMV0sIGMyWzFdKSwgTWF0aC5tYXgoYzFbMV0sIGMyWzFdKSksXG4gICAgICAgICAgICAgICAgTWF0aFV0aWxzXzEuTWF0aFV0aWxzLmNsYW1wKE1hdGhVdGlsc18xLk1hdGhVdGlscy5tYXAoZml0bmVzcywgMCwgbWF4LCBjMVsyXSwgYzJbMl0pLCBNYXRoLm1pbihjMVsyXSwgYzJbMl0pLCBNYXRoLm1heChjMVsyXSwgYzJbMl0pKVxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIHRoaXMuY3R4LmxpbmVXaWR0aCA9IDQ7XG4gICAgICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBgcmdiKFxuICAgICAgICAgICAgICAgICR7TWF0aC5mbG9vcihjWzBdKX0sXG4gICAgICAgICAgICAgICAgJHtNYXRoLmZsb29yKGNbMV0pfSxcbiAgICAgICAgICAgICAgICAke01hdGguZmxvb3IoY1sxXSl9XG4gICAgICAgICAgICApYDtcbiAgICAgICAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgbGV0IGxhID0gZWF0ZXIubG9va2F0LnRpbWVzKHRoaXMucGFyYW1zLmVhdGVyX3NpemUgKiBleHBvcnRzLkRQUikuYWRkKGVhdGVyLnBvc2l0aW9uKTtcbiAgICAgICAgICAgIGxldCBhID0gbGEuc3ViKGVhdGVyLnBvc2l0aW9uKS5hbmdsZSgpO1xuICAgICAgICAgICAgbGV0IGIgPSBNYXRoLlBJIC8gMS4zO1xuICAgICAgICAgICAgbGV0IHUgPSBuZXcgVmVjdG9yMkRfMS5WZWN0b3IyRChNYXRoLmNvcyhhICsgYiksIE1hdGguc2luKGEgKyBiKSk7XG4gICAgICAgICAgICBsZXQgdiA9IG5ldyBWZWN0b3IyRF8xLlZlY3RvcjJEKE1hdGguY29zKGEgLSBiKSwgTWF0aC5zaW4oYSAtIGIpKTtcbiAgICAgICAgICAgIGxldCBwMSA9IGVhdGVyLnBvc2l0aW9uLmFkZCh1LnRpbWVzKHRoaXMucGFyYW1zLmVhdGVyX3NpemUgKiBleHBvcnRzLkRQUikpO1xuICAgICAgICAgICAgbGV0IHAyID0gZWF0ZXIucG9zaXRpb24uYWRkKHYudGltZXModGhpcy5wYXJhbXMuZWF0ZXJfc2l6ZSAqIGV4cG9ydHMuRFBSKSk7XG4gICAgICAgICAgICB0aGlzLmN0eC5tb3ZlVG8ocDEueCAvIGV4cG9ydHMuRFBSLCBwMS55IC8gZXhwb3J0cy5EUFIpO1xuICAgICAgICAgICAgdGhpcy5jdHgubGluZVRvKGxhLnggLyBleHBvcnRzLkRQUiwgbGEueSAvIGV4cG9ydHMuRFBSKTtcbiAgICAgICAgICAgIHRoaXMuY3R4LmxpbmVUbyhwMi54IC8gZXhwb3J0cy5EUFIsIHAyLnkgLyBleHBvcnRzLkRQUik7XG4gICAgICAgICAgICB0aGlzLmN0eC5maWxsKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZHJhd0Zvb2QoKSB7XG4gICAgICAgIC8vZHJhdyBmb29kXG4gICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9ICdyZ2IoNTIsIDczLCA5NCknO1xuICAgICAgICBjb25zdCBmcyA9IHRoaXMucGFyYW1zLmZvb2Rfc2l6ZTtcbiAgICAgICAgZm9yIChsZXQgZiBvZiB0aGlzLmZvb2QpIHtcbiAgICAgICAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgdGhpcy5jdHguZmlsbFJlY3QoKGYueCAtIGZzIC8gMikgLyBleHBvcnRzLkRQUiwgKGYueSAtIGZzIC8gMikgLyBleHBvcnRzLkRQUiwgZnMsIGZzKTtcbiAgICAgICAgICAgIHRoaXMuY3R4LmZpbGwoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRTZWxlY3RlZChpbmRleCkge1xuICAgICAgICB0aGlzLmZvbGxvd19maXR0ZXN0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRfaWR4ID0gaW5kZXg7XG4gICAgfVxuICAgIGdldFNlbGVjdGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3B1bGF0aW9uW3RoaXMuc2VsZWN0ZWRfaWR4XTtcbiAgICB9XG4gICAgZ2V0RWF0ZXIoaWR4KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvcHVsYXRpb25baWR4XTtcbiAgICB9XG4gICAgZ2V0RWF0ZXJCcmFpbihpZHgpIHtcbiAgICAgICAgcmV0dXJuIE5ldXJhbE5ldF8xLk5ldXJhbE5ldC5mcm9tV2VpZ2h0cyh0aGlzLmxheWVyX3NpemVzLCB0aGlzLmdlbmV0aWNzLmdldENocm9tb3NvbWUodGhpcy5wb3B1bGF0aW9uW2lkeF0uZ2V0Q2hyb21vc29tZUlkeCgpKS5nZXRCaXRzKCkpLnRvRnVuY3Rpb24oKTtcbiAgICB9XG4gICAgdG9nZ2xlRmFzdE1vZGUoKSB7XG4gICAgICAgIHRoaXMuZmFzdF9tb2RlID0gIXRoaXMuZmFzdF9tb2RlO1xuICAgIH1cbiAgICBnZXREYXJ3aW5JbnN0YW5jZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXRpY3M7XG4gICAgfVxuICAgIGdldEZpdHRlc3RCcmFpbigpIHtcbiAgICAgICAgcmV0dXJuIE5ldXJhbE5ldF8xLk5ldXJhbE5ldC5mcm9tV2VpZ2h0cyh0aGlzLmxheWVyX3NpemVzLCB0aGlzLmdlbmV0aWNzLmdldEZpdHRlc3QoKS5nZXRCaXRzKCkpLnRvRnVuY3Rpb24oKTtcbiAgICB9XG4gICAgdG9nZ2xlTWF0aW5nKCkge1xuICAgICAgICB0aGlzLnN0b3BfbWF0aW5nID0gIXRoaXMuc3RvcF9tYXRpbmc7XG4gICAgfVxuICAgIGdldCBzZWxlY3RlZElkeCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWRfaWR4O1xuICAgIH1cbiAgICBnZXQgcGFyYW1ldGVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyYW1zO1xuICAgIH1cbn1cbmV4cG9ydHMuU21hcnRFYXRlcnMgPSBTbWFydEVhdGVycztcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgQ2hyb21vc29tZV8xID0gcmVxdWlyZShcIi4vQ2hyb21vc29tZVwiKTtcbmNvbnN0IENyb3Nzb3Zlck1ldGhvZHNfMSA9IHJlcXVpcmUoXCIuL0Nyb3Nzb3Zlck1ldGhvZHNcIik7XG5jb25zdCBNdXRhdGlvbk1ldGhvZF8xID0gcmVxdWlyZShcIi4vTXV0YXRpb25NZXRob2RcIik7XG5jb25zdCBVdGlsc18xID0gcmVxdWlyZShcIi4vVXRpbHNcIik7XG5jbGFzcyBEYXJ3aW4ge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xuICAgICAgICB0aGlzLnBvcHVsYXRpb24gPSBbXTtcbiAgICAgICAgdGhpcy5nZW5lcmF0aW9uID0gMDtcbiAgICAgICAgY29uc3Qgb25fZml0bmVzc191cGRhdGUgPSAoKSA9PiB7IHRoaXMuc3RhdHMubmVlZHNfdXBkYXRlID0gdHJ1ZTsgfTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJhbXMucG9wdWxhdGlvbl9zaXplOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGNocm9tbyA9IG5ldyBDaHJvbW9zb21lXzEuQ2hyb21vc29tZShwYXJhbXMuY2hyb21vc29tZV9sZW5ndGgsIHBhcmFtcy5yYW5kX2Z1bmMpO1xuICAgICAgICAgICAgY2hyb21vLm9uKCd1cGRhdGVfZml0bmVzcycsIG9uX2ZpdG5lc3NfdXBkYXRlKTtcbiAgICAgICAgICAgIHRoaXMucG9wdWxhdGlvbi5wdXNoKGNocm9tbyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXJhbXMgPSBPYmplY3QuYXNzaWduKHsgY3Jvc3NvdmVyX3JhdGU6IDAuNywgbXV0YXRpb25fcmF0ZTogMSAvIHBhcmFtcy5jaHJvbW9zb21lX2xlbmd0aCwgY3Jvc3NvdmVyX21ldGhvZDogQ3Jvc3NvdmVyTWV0aG9kc18xLkNyb3Nzb3Zlck1ldGhvZC5TSU5HTEVfUE9JTlQsIG11dGF0aW9uX21ldGhvZDogTXV0YXRpb25NZXRob2RfMS5NdXRhdGlvbk1ldGhvZC5GTElQLCBlbGl0ZV9jb3VudDogMSwgZWxpdGVfY29waWVzOiAxIH0sIHBhcmFtcyk7XG4gICAgICAgIHRoaXMuc3RhdHMgPSB7XG4gICAgICAgICAgICBmaXR0ZXN0OiB0aGlzLnBvcHVsYXRpb25bMF0sXG4gICAgICAgICAgICBhdmdfZml0bmVzczogMCxcbiAgICAgICAgICAgIHN1bV9maXRuZXNzOiAwLFxuICAgICAgICAgICAgZml0dGVzdF9pZHg6IDAsXG4gICAgICAgICAgICBuZWVkc191cGRhdGU6IHRydWVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZHVwbGljYXRlRWxpdGUobmV3X3BvcCkge1xuICAgICAgICAvLyBFTElUSVNNIGkuZS4ga2VlcGluZyB0aGUgZml0dGVzdCBDaHJvbW9zb21lc1xuICAgICAgICBpZiAodGhpcy5wYXJhbXMuZWxpdGVfY291bnQgPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBlbGl0ZSA9IHRoaXMuZ2V0VG9wQ2hyb21vc29tZXModGhpcy5wYXJhbXMuZWxpdGVfY291bnQpO1xuICAgICAgICAgICAgLy8gS2VlcCB0aGUgZml0dGVzdCBDaHJvbW9zb21lc1xuICAgICAgICAgICAgbmV3X3BvcC5wdXNoKC4uLmVsaXRlKTtcbiAgICAgICAgICAgIC8vIER1cGxpY2F0ZSB0aGUgZWxpdGVcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5wYXJhbXMuZWxpdGVfY291bnQ7IGkrKykge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5wYXJhbXMuZWxpdGVfY29waWVzOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3X3BvcC5wdXNoKGVsaXRlW2ldLmNsb25lKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjcm9zc292ZXIobmV3X3BvcCkge1xuICAgICAgICB3aGlsZSAobmV3X3BvcC5sZW5ndGggPCB0aGlzLnBhcmFtcy5wb3B1bGF0aW9uX3NpemUpIHtcbiAgICAgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgdGhpcy5wYXJhbXMuY3Jvc3NvdmVyX3JhdGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtdW0gPSB0aGlzLmdldFJhbmRvbUNocm9tb3NvbWUoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBkYWQgPSB0aGlzLmdldFJhbmRvbUNocm9tb3NvbWUoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBiYWJpZXMgPSBtdW0uY3Jvc3NvdmVyKGRhZCwgdGhpcy5wYXJhbXMuY3Jvc3NvdmVyX21ldGhvZCk7XG4gICAgICAgICAgICAgICAgY29uc3QgYmFieTEgPSBuZXcgQ2hyb21vc29tZV8xLkNocm9tb3NvbWUoYmFiaWVzLmJhYnkxLCB0aGlzLnBhcmFtcy5yYW5kX2Z1bmMpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJhYnkyID0gbmV3IENocm9tb3NvbWVfMS5DaHJvbW9zb21lKGJhYmllcy5iYWJ5MiwgdGhpcy5wYXJhbXMucmFuZF9mdW5jKTtcbiAgICAgICAgICAgICAgICBuZXdfcG9wLnB1c2goYmFieTEsIGJhYnkyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBCZWNhdXNlIHdlIGFkZCB0d28gY2hyb21vc29tZXMgcGVyIGxvb3BcbiAgICAgICAgLy8gaWYgcG9wdWxhdGlvbl9zaXplIGlzIG9kZFxuICAgICAgICBpZiAodGhpcy5wYXJhbXMucG9wdWxhdGlvbl9zaXplICUgMiA9PT0gMSkge1xuICAgICAgICAgICAgbmV3X3BvcC5wb3AoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBtdXRhdGUobmV3X3BvcCkge1xuICAgICAgICBmb3IgKGNvbnN0IGMgb2YgbmV3X3BvcCkge1xuICAgICAgICAgICAgYy5tdXRhdGUodGhpcy5wYXJhbXMubXV0YXRpb25fcmF0ZSwgdGhpcy5wYXJhbXMubXV0YXRpb25fbWV0aG9kKTtcbiAgICAgICAgICAgIC8vIGMuc2V0Rml0bmVzcygwKTsgLy8gcmVzZXQgZml0bmVzc1xuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZUZpdG5lc3MoZml0bmVzc19ldmFsdWF0b3IpIHtcbiAgICAgICAgZm9yIChjb25zdCBjaHJvbW8gb2YgdGhpcy5wb3B1bGF0aW9uKSB7XG4gICAgICAgICAgICBjaHJvbW8uc2V0Rml0bmVzcyhmaXRuZXNzX2V2YWx1YXRvcihjaHJvbW8uZ2V0Qml0cygpKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGF0cy5uZWVkc191cGRhdGUgPSB0cnVlO1xuICAgIH1cbiAgICAvLyBnZW5lcmF0ZXMgdGhlIG5ldyBnZW5lcmF0aW9uXG4gICAgLy8gdGhlIGZpdG5lc3Mgb2YgZWFjaCBDaHJvbW9zb21lIG11c3QgYmUgdXBkYXRlZCBiZWZvcmUgY2FsbGluZyBtYXRlXG4gICAgbWF0ZSgpIHtcbiAgICAgICAgY29uc3QgbmV3X3BvcCA9IFtdO1xuICAgICAgICAvLyBFTElUSVNNXG4gICAgICAgIHRoaXMuZHVwbGljYXRlRWxpdGUobmV3X3BvcCk7XG4gICAgICAgIC8vIFJFUFJPRFVDVElPTlxuICAgICAgICB0aGlzLmNyb3Nzb3ZlcihuZXdfcG9wKTtcbiAgICAgICAgdGhpcy5tdXRhdGUobmV3X3BvcCk7XG4gICAgICAgIC8vIHVwdGF0ZSB0aGUgcG9wdWxhdGlvblxuICAgICAgICB0aGlzLnBvcHVsYXRpb24gPSBuZXdfcG9wO1xuICAgICAgICB0aGlzLmdlbmVyYXRpb24rKztcbiAgICAgICAgdGhpcy51cGRhdGVTdGF0cyh0cnVlKTtcbiAgICB9XG4gICAgLy8gR2V0dGVycyAmIFNldHRlcnNcbiAgICBnZXRQb3B1bGF0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3B1bGF0aW9uO1xuICAgIH1cbiAgICBnZXRDaHJvbW9zb21lKGlkeCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3B1bGF0aW9uW2lkeF07XG4gICAgfVxuICAgIGdldFJhbmRvbUNocm9tb3NvbWUoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRzLm5lZWRzX3VwZGF0ZSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTdGF0cygpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnN0YXRzLnN1bV9maXRuZXNzID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wb3B1bGF0aW9uW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMucG9wdWxhdGlvbi5sZW5ndGgpXTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByID0gTWF0aC5yYW5kb20oKSAqIHRoaXMuc3RhdHMuc3VtX2ZpdG5lc3M7XG4gICAgICAgIGxldCBhY2NfZml0bmVzcyA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5wb3B1bGF0aW9uLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhY2NfZml0bmVzcyArPSB0aGlzLnBvcHVsYXRpb25baV0uZ2V0Rml0bmVzcygpO1xuICAgICAgICAgICAgaWYgKGFjY19maXRuZXNzID4gcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBvcHVsYXRpb25baV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0VG9wQ2hyb21vc29tZXMoY291bnQpIHtcbiAgICAgICAgLy8gcmV0dXJuIHRoaXMucG9wdWxhdGlvbi5zb3J0KChhLCBiKSA9PiBiLmdldEZpdG5lc3MoKSAtIGEuZ2V0Rml0bmVzcygpKS5zbGljZSgwLCBjb3VudCk7XG4gICAgICAgIHJldHVybiBVdGlsc18xLnBhcnRpYWxRdWlja1NvcnQodGhpcy5wb3B1bGF0aW9uLCBjb3VudCkuc2xpY2UoMCwgY291bnQpO1xuICAgIH1cbiAgICBnZXRBdmVyYWdlRml0bmVzcygpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdHMubmVlZHNfdXBkYXRlKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVN0YXRzKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHMuYXZnX2ZpdG5lc3M7XG4gICAgfVxuICAgIGdldEZpdHRlc3QoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRzLm5lZWRzX3VwZGF0ZSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTdGF0cygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRzLmZpdHRlc3Q7XG4gICAgfVxuICAgIGdldFBhcmFtcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyYW1zO1xuICAgIH1cbiAgICBnZXRHZW5lcmF0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0aW9uO1xuICAgIH1cbiAgICBnZXRTdGF0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHM7XG4gICAgfVxuICAgIHVwZGF0ZVN0YXRzKGZvcmNlX3VwZGF0ZSA9IGZhbHNlKSB7XG4gICAgICAgIGlmIChmb3JjZV91cGRhdGUgfHwgdGhpcy5zdGF0cy5uZWVkc191cGRhdGUpIHtcbiAgICAgICAgICAgIGxldCBzdW1fZml0bmVzcyA9IDA7XG4gICAgICAgICAgICBsZXQgbWF4X2ZpdG5lc3MgPSAwO1xuICAgICAgICAgICAgbGV0IGZpdHRlc3RfaWR4ID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5wb3B1bGF0aW9uLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZml0bmVzcyA9IHRoaXMucG9wdWxhdGlvbltpXS5nZXRGaXRuZXNzKCk7XG4gICAgICAgICAgICAgICAgc3VtX2ZpdG5lc3MgKz0gZml0bmVzcztcbiAgICAgICAgICAgICAgICBpZiAoZml0bmVzcyA+IG1heF9maXRuZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIG1heF9maXRuZXNzID0gZml0bmVzcztcbiAgICAgICAgICAgICAgICAgICAgZml0dGVzdF9pZHggPSBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc3RhdHMuc3VtX2ZpdG5lc3MgPSBzdW1fZml0bmVzcztcbiAgICAgICAgICAgIHRoaXMuc3RhdHMuYXZnX2ZpdG5lc3MgPSBzdW1fZml0bmVzcyAvIHRoaXMucGFyYW1zLnBvcHVsYXRpb25fc2l6ZTtcbiAgICAgICAgICAgIHRoaXMuc3RhdHMuZml0dGVzdCA9IHRoaXMucG9wdWxhdGlvbltmaXR0ZXN0X2lkeF0uY2xvbmUoKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdHMuZml0dGVzdF9pZHggPSBmaXR0ZXN0X2lkeDtcbiAgICAgICAgICAgIHRoaXMuc3RhdHMubmVlZHNfdXBkYXRlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnRzLkRhcndpbiA9IERhcndpbjtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgTXV0YXRpb25NZXRob2RfMSA9IHJlcXVpcmUoXCIuL011dGF0aW9uTWV0aG9kXCIpO1xuY29uc3QgQ3Jvc3NvdmVyTWV0aG9kc18xID0gcmVxdWlyZShcIi4vQ3Jvc3NvdmVyTWV0aG9kc1wiKTtcbmNvbnN0IEV2ZW50RW1pdHRlcl8xID0gcmVxdWlyZShcIi4vRXZlbnRFbWl0dGVyXCIpO1xuY2xhc3MgQ2hyb21vc29tZSBleHRlbmRzIEV2ZW50RW1pdHRlcl8xLkV2ZW50RW1pdHRlciB7XG4gICAgY29uc3RydWN0b3IobGVuZ3RoX29yX2JpdHMsIHJhbmRfZnVuYykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmJpdHMgPSBbXTtcbiAgICAgICAgdGhpcy5maXRuZXNzID0gMDtcbiAgICAgICAgdGhpcy5yYW5kX2Z1bmMgPSByYW5kX2Z1bmM7XG4gICAgICAgIGlmICh0eXBlb2YgbGVuZ3RoX29yX2JpdHMgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICB0aGlzLmxlbmd0aCA9IGxlbmd0aF9vcl9iaXRzO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5iaXRzLnB1c2gocmFuZF9mdW5jKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5iaXRzID0gbGVuZ3RoX29yX2JpdHM7XG4gICAgICAgICAgICB0aGlzLmxlbmd0aCA9IGxlbmd0aF9vcl9iaXRzLmxlbmd0aDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRGaXRuZXNzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maXRuZXNzO1xuICAgIH1cbiAgICBzZXRGaXRuZXNzKGYpIHtcbiAgICAgICAgdGhpcy5maXRuZXNzID0gZjtcbiAgICAgICAgdGhpcy5lbWl0KCd1cGRhdGVfZml0bmVzcycsIGYpO1xuICAgIH1cbiAgICAvLyByZXR1cm5zIHRoZSBudW1iZXIgb2YgYml0cyB3aGljaCBhcmUgZGlmZmVyZW50ID0gSGFtbWluZyBkaXN0YW5jZVxuICAgIGNvbXBhcmUoYm9iKSB7XG4gICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTWF0aC5taW4odGhpcy5sZW5ndGgsIGJvYi5sZW5ndGgpOyBpKyspIHtcbiAgICAgICAgICAgIGNvdW50ICs9IHRoaXMuYml0c1tpXSAhPT0gYm9iLmJpdHNbaV0gPyAxIDogMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY291bnQ7XG4gICAgfVxuICAgIG11dGF0ZV9mbGlwKG11dF9yYXRlKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCBtdXRfcmF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYml0c1tpXSA9IHRoaXMucmFuZF9mdW5jKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgbXV0YXRlX3N3YXAobXV0X3JhdGUpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IG11dF9yYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0bXAgPSB0aGlzLmJpdHNbaV07XG4gICAgICAgICAgICAgICAgdGhpcy5iaXRzW2ldID0gdGhpcy5iaXRzW2pdO1xuICAgICAgICAgICAgICAgIHRoaXMuYml0c1tqXSA9IHRtcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBtdXRhdGUobXV0X3JhdGUgPSAxIC8gdGhpcy5sZW5ndGgsIG1ldGhvZCkge1xuICAgICAgICBpZiAodHlwZW9mIG1ldGhvZCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHN3aXRjaCAobWV0aG9kKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBNdXRhdGlvbk1ldGhvZF8xLk11dGF0aW9uTWV0aG9kLkZMSVA6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubXV0YXRlX2ZsaXAobXV0X3JhdGUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIE11dGF0aW9uTWV0aG9kXzEuTXV0YXRpb25NZXRob2QuU1dBUDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tdXRhdGVfc3dhcChtdXRfcmF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZXRCaXRzKG1ldGhvZCh0aGlzLmdldEJpdHMoKSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNyb3Nzb3Zlcl9zaW5nbGVfcG9pbnQoYm9iKSB7XG4gICAgICAgIGNvbnN0IGIxID0gW107XG4gICAgICAgIGNvbnN0IGIyID0gW107XG4gICAgICAgIGNvbnN0IHAgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0aGlzLmxlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYjEucHVzaChpIDwgcCA/IHRoaXMuYml0c1tpXSA6IGJvYi5iaXRzW2ldKTtcbiAgICAgICAgICAgIGIyLnB1c2goaSA8IHAgPyBib2IuYml0c1tpXSA6IHRoaXMuYml0c1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgYmFieTE6IGIxLCBiYWJ5MjogYjIgfTtcbiAgICB9XG4gICAgY3Jvc3NvdmVyX3R3b19wb2ludChib2IpIHtcbiAgICAgICAgY29uc3QgYjEgPSBbXTtcbiAgICAgICAgY29uc3QgYjIgPSBbXTtcbiAgICAgICAgbGV0IHAxID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGhpcy5sZW5ndGgpO1xuICAgICAgICBsZXQgcDIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0aGlzLmxlbmd0aCk7XG4gICAgICAgIGlmIChwMSA+IHAyKSB7XG4gICAgICAgICAgICBjb25zdCBjID0gcDI7XG4gICAgICAgICAgICBwMiA9IHAxO1xuICAgICAgICAgICAgcDEgPSBjO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYjEucHVzaChpIDwgcDEgPyB0aGlzLmJpdHNbaV0gOiAoaSA8IHAyID8gYm9iLmJpdHNbaV0gOiB0aGlzLmJpdHNbaV0pKTtcbiAgICAgICAgICAgIGIyLnB1c2goaSA8IHAxID8gYm9iLmJpdHNbaV0gOiAoaSA8IHAyID8gdGhpcy5iaXRzW2ldIDogYm9iLmJpdHNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBiYWJ5MTogYjEsIGJhYnkyOiBiMiB9O1xuICAgIH1cbiAgICBjcm9zc292ZXJfdW5pZm9ybShib2IpIHtcbiAgICAgICAgY29uc3QgYjEgPSBbXTtcbiAgICAgICAgY29uc3QgYjIgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgc3dhcCA9IE1hdGgucmFuZG9tKCkgPCAwLjU7XG4gICAgICAgICAgICBiMS5wdXNoKHN3YXAgPyBib2IuYml0c1tpXSA6IHRoaXMuYml0c1tpXSk7XG4gICAgICAgICAgICBiMi5wdXNoKHN3YXAgPyB0aGlzLmJpdHNbaV0gOiBib2IuYml0c1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgYmFieTE6IGIxLCBiYWJ5MjogYjIgfTtcbiAgICB9XG4gICAgY3Jvc3NvdmVyX2hhbGZfdW5pZm9ybShib2IpIHtcbiAgICAgICAgbGV0IGIxID0gW107XG4gICAgICAgIGxldCBiMiA9IFtdO1xuICAgICAgICBsZXQgZGlmZl9iaXRzID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIGlmICh0aGlzLmJpdHNbaV0gIT09IGJvYi5iaXRzW2ldKVxuICAgICAgICAgICAgICAgIGRpZmZfYml0cy5wdXNoKGkpO1xuICAgICAgICBsZXQgTiA9IGRpZmZfYml0cy5sZW5ndGg7XG4gICAgICAgIGIxID0gdGhpcy5iaXRzLnNsaWNlKCk7XG4gICAgICAgIGIyID0gYm9iLmJpdHMuc2xpY2UoKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBOIC8gMjsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgaWR4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZGlmZl9iaXRzLmxlbmd0aCk7XG4gICAgICAgICAgICBiMVtkaWZmX2JpdHNbaWR4XV0gPSBib2IuYml0c1tkaWZmX2JpdHNbaWR4XV07XG4gICAgICAgICAgICBiMltkaWZmX2JpdHNbaWR4XV0gPSB0aGlzLmJpdHNbZGlmZl9iaXRzW2lkeF1dO1xuICAgICAgICAgICAgZGlmZl9iaXRzLnNwbGljZShpZHgsIDEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGJhYnkxOiBiMSwgYmFieTI6IGIyIH07XG4gICAgfVxuICAgIGNyb3Nzb3Zlcl9vcmRlcmVkKGJvYikge1xuICAgICAgICBjb25zdCBiMSA9IFtdO1xuICAgICAgICBjb25zdCBiMiA9IFtdO1xuICAgICAgICBsZXQgaW5mID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGhpcy5sZW5ndGgpLCBzdXAgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0aGlzLmxlbmd0aCksIHRtcCA9IGluZjtcbiAgICAgICAgaW5mID0gTWF0aC5taW4oaW5mLCBzdXApO1xuICAgICAgICBzdXAgPSBNYXRoLm1heCh0bXAsIHN1cCk7XG4gICAgICAgIGZvciAobGV0IGkgPSBpbmY7IGkgPCBzdXA7IGkrKykge1xuICAgICAgICAgICAgYjFbaV0gPSAoaW5mIDw9IGkgJiYgaSA8PSBzdXApID8gYm9iLmJpdHNbaV0gOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICBiMltpXSA9IChpbmYgPD0gaSAmJiBpIDw9IHN1cCkgPyB0aGlzLmJpdHNbaV0gOiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoYjEuaW5kZXhPZih0aGlzLmJpdHNbaV0pID09PSAtMSkge1xuICAgICAgICAgICAgICAgIGIxW2ldID0gdGhpcy5iaXRzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChiMS5pbmRleE9mKHRoaXMuYml0c1tqXSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiMVtpXSA9IHRoaXMuYml0c1tqXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChiMi5pbmRleE9mKGJvYi5iaXRzW2ldKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICBiMltpXSA9IGJvYi5iaXRzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChiMi5pbmRleE9mKGJvYi5iaXRzW2pdKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGIyW2ldID0gYm9iLmJpdHNbal07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgYmFieTE6IGIxLCBiYWJ5MjogYjIgfTtcbiAgICB9XG4gICAgLy8gcHVibGljIGNyb3Nzb3Zlcihib2I6IENocm9tb3NvbWU8VD4sIG1ldGhvZDogQ3Jvc3NvdmVyTWV0aG9kKTogT2Zmc3ByaW5nPFQ+O1xuICAgIC8vIHB1YmxpYyBjcm9zc292ZXIoYm9iOiBDaHJvbW9zb21lPFQ+LCBtZXRob2Q6IEN1c3RvbUNyb3Nzb3Zlck1ldGhvZDxUPik6IE9mZnNwcmluZzxUPjtcbiAgICBjcm9zc292ZXIoYm9iLCBtZXRob2QpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBtZXRob2QgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKG1ldGhvZCkge1xuICAgICAgICAgICAgICAgIGNhc2UgQ3Jvc3NvdmVyTWV0aG9kc18xLkNyb3Nzb3Zlck1ldGhvZC5TSU5HTEVfUE9JTlQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNyb3Nzb3Zlcl9zaW5nbGVfcG9pbnQoYm9iKTtcbiAgICAgICAgICAgICAgICBjYXNlIENyb3Nzb3Zlck1ldGhvZHNfMS5Dcm9zc292ZXJNZXRob2QuVFdPX1BPSU5UOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jcm9zc292ZXJfdHdvX3BvaW50KGJvYik7XG4gICAgICAgICAgICAgICAgY2FzZSBDcm9zc292ZXJNZXRob2RzXzEuQ3Jvc3NvdmVyTWV0aG9kLlVOSUZPUk06XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNyb3Nzb3Zlcl91bmlmb3JtKGJvYik7XG4gICAgICAgICAgICAgICAgY2FzZSBDcm9zc292ZXJNZXRob2RzXzEuQ3Jvc3NvdmVyTWV0aG9kLkhBTEZfVU5JRk9STTpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3Jvc3NvdmVyX2hhbGZfdW5pZm9ybShib2IpO1xuICAgICAgICAgICAgICAgIGNhc2UgQ3Jvc3NvdmVyTWV0aG9kc18xLkNyb3Nzb3Zlck1ldGhvZC5PUkRFUkVEOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jcm9zc292ZXJfb3JkZXJlZChib2IpO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5pbXBsZW1lbnRlZCBDcm9zc292ZXJNZXRob2Q6ICR7bWV0aG9kfSAoJHtDcm9zc292ZXJNZXRob2RzXzEuQ3Jvc3NvdmVyTWV0aG9kW21ldGhvZF19KWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXRob2QoYm9iKTtcbiAgICB9XG4gICAgc2V0Qml0cyhiaXRzKSB7XG4gICAgICAgIHRoaXMuYml0cyA9IFsuLi5iaXRzXTtcbiAgICB9XG4gICAgZ2V0Qml0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYml0cztcbiAgICB9XG4gICAgY29weShib2IpIHtcbiAgICAgICAgdGhpcy5iaXRzID0gYm9iLmJpdHMuc2xpY2UoKTtcbiAgICAgICAgdGhpcy5yYW5kX2Z1bmMgPSBib2IucmFuZF9mdW5jO1xuICAgICAgICB0aGlzLmZpdG5lc3MgPSBib2IuZml0bmVzcztcbiAgICB9XG4gICAgY2xvbmUoKSB7XG4gICAgICAgIGxldCBjID0gbmV3IENocm9tb3NvbWUodGhpcy5sZW5ndGgsIHRoaXMucmFuZF9mdW5jKTtcbiAgICAgICAgYy5jb3B5KHRoaXMpO1xuICAgICAgICByZXR1cm4gYztcbiAgICB9XG59XG5leHBvcnRzLkNocm9tb3NvbWUgPSBDaHJvbW9zb21lO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jbGFzcyBFdmVudEVtaXR0ZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmhhbmRsZXJzID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgICBvbihldiwgaGFuZGxlcikge1xuICAgICAgICBpZiAodGhpcy5oYW5kbGVycy5oYXMoZXYpKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZXJzLmdldChldikucHVzaChoYW5kbGVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlcnMuc2V0KGV2LCBbaGFuZGxlcl0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVtaXQoZXYsIHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLmhhbmRsZXJzLmhhcyhldikpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaGFuZGxlciBvZiB0aGlzLmhhbmRsZXJzLmdldChldikpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGJpbmRFdmVudChlbSwgZXYpIHtcbiAgICAgICAgZW0ub24oZXYsIHZhbHVlID0+IHRoaXMuZW1pdChldiwgdmFsdWUpKTtcbiAgICB9XG59XG5leHBvcnRzLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuLy8gU29ydCB0aGUgayBsYXJnZXN0IGVsZW1lbnRzXG5mdW5jdGlvbiBwYXJ0aWFsUXVpY2tTb3J0KGFycmF5LCBrKSB7XG4gICAgcGFydGlhbF9xdWlja3NvcnQoYXJyYXksIDAsIGFycmF5Lmxlbmd0aCAtIDEsIGspO1xuICAgIHJldHVybiBhcnJheTtcbn1cbmV4cG9ydHMucGFydGlhbFF1aWNrU29ydCA9IHBhcnRpYWxRdWlja1NvcnQ7XG5mdW5jdGlvbiBwYXJ0aWFsX3F1aWNrc29ydChhcnJheSwgbGVmdCwgcmlnaHQsIGspIHtcbiAgICBjb25zdCBwaXZvdCA9IE1hdGguZmxvb3IoKGxlZnQgKyByaWdodCkgLyAyKTtcbiAgICBpZiAobGVmdCA8IHJpZ2h0KSB7XG4gICAgICAgIGNvbnN0IHAgPSBwYXJ0aXRpb24oYXJyYXksIHBpdm90LCBsZWZ0LCByaWdodCk7XG4gICAgICAgIHBhcnRpYWxfcXVpY2tzb3J0KGFycmF5LCBsZWZ0LCBwIC0gMSwgayk7XG4gICAgICAgIGlmIChwIDwgaykge1xuICAgICAgICAgICAgcGFydGlhbF9xdWlja3NvcnQoYXJyYXksIHAsIHJpZ2h0LCBrKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIHBhcnRpdGlvbihhcnJheSwgcGl2b3QsIGxlZnQsIHJpZ2h0KSB7XG4gICAgY29uc3QgcGl2b3RfdmFsdWUgPSBhcnJheVtwaXZvdF0uZ2V0Rml0bmVzcygpO1xuICAgIHdoaWxlIChsZWZ0IDw9IHJpZ2h0KSB7XG4gICAgICAgIHdoaWxlIChhcnJheVtsZWZ0XS5nZXRGaXRuZXNzKCkgPiBwaXZvdF92YWx1ZSkge1xuICAgICAgICAgICAgbGVmdCsrO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChhcnJheVtyaWdodF0uZ2V0Rml0bmVzcygpIDwgcGl2b3RfdmFsdWUpIHtcbiAgICAgICAgICAgIHJpZ2h0LS07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxlZnQgPD0gcmlnaHQpIHtcbiAgICAgICAgICAgIHN3YXAoYXJyYXksIGxlZnQsIHJpZ2h0KTtcbiAgICAgICAgICAgIGxlZnQrKztcbiAgICAgICAgICAgIHJpZ2h0LS07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxlZnQ7XG59XG5mdW5jdGlvbiBzd2FwKGFycmF5LCBhLCBiKSB7XG4gICAgaWYgKGEgPT09IGIpXG4gICAgICAgIHJldHVybjtcbiAgICBjb25zdCB0bXAgPSBhcnJheVthXTtcbiAgICBhcnJheVthXSA9IGFycmF5W2JdO1xuICAgIGFycmF5W2JdID0gdG1wO1xufVxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jb25zdCBNYXRoVXRpbHNfMSA9IHJlcXVpcmUoXCIuL01hdGhVdGlsc1wiKTtcbmNsYXNzIEVhdGVyIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3MsIGFuZ2xlLCBjaHJvbW9zb21lSWR4KSB7XG4gICAgICAgIHRoaXMuX3BvcyA9IHBvcztcbiAgICAgICAgdGhpcy5fYW5nbGUgPSBhbmdsZTtcbiAgICAgICAgdGhpcy5jaHJvbW9zb21lSWR4ID0gY2hyb21vc29tZUlkeDtcbiAgICB9XG4gICAgZ2V0Q2hyb21vc29tZUlkeCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hyb21vc29tZUlkeDtcbiAgICB9XG4gICAgZ2V0IHBvc2l0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcG9zO1xuICAgIH1cbiAgICBzZXQgcG9zaXRpb24obmV3X3Bvcykge1xuICAgICAgICB0aGlzLl9wb3MgPSBuZXdfcG9zO1xuICAgIH1cbiAgICBnZXQgYW5nbGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hbmdsZTtcbiAgICB9XG4gICAgc2V0IGFuZ2xlKGFuZ2xlKSB7XG4gICAgICAgIHRoaXMuX2FuZ2xlID0gYW5nbGUgJSBNYXRoVXRpbHNfMS5NYXRoVXRpbHMuVFdPX1BJO1xuICAgIH1cbn1cbmV4cG9ydHMuRWF0ZXIgPSBFYXRlcjtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY2xhc3MgTmV1cmFsTmV0IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy53ZWlnaHRzX2FuZF9iaWFzZXMgPSBbXTtcbiAgICB9XG4gICAgZ2V0V2VpZ2h0KGwsIGosIGspIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2VpZ2h0c19hbmRfYmlhc2VzW3RoaXMub2Zmc2V0c1tsIC0gMV0gKyBqICogKHRoaXMubnVtX25ldXJvbnNfcGVyX2xheWVyW2wgLSAxXSArIDEpICsgayArIDFdO1xuICAgIH1cbiAgICBnZXRCaWFzKGwsIGopIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2VpZ2h0c19hbmRfYmlhc2VzW3RoaXMub2Zmc2V0c1tsIC0gMV0gKyBqICogKHRoaXMubnVtX25ldXJvbnNfcGVyX2xheWVyW2wgLSAxXSArIDEpXTtcbiAgICB9XG4gICAgZmVlZGZvcndhcmQoaW5wdXRzKSB7XG4gICAgICAgIGlmICh0aGlzLndlaWdodHNfYW5kX2JpYXNlcy5sZW5ndGggPT09IDApXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBmZWVkZm9yd2FyZCBiZWZvcmUgJ3B1dFdlaWdodHMnIG9yICdmcm9tSlNPTicgd2FzIGNhbGxlZC5gKTtcbiAgICAgICAgaWYgKGlucHV0cy5sZW5ndGggIT09IHRoaXMubnVtX25ldXJvbnNfcGVyX2xheWVyWzBdKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCAke3RoaXMubnVtX25ldXJvbnNfcGVyX2xheWVyWzBdfSBpbnB1dHMsIGdvdCAke2lucHV0cy5sZW5ndGh9LmApO1xuICAgICAgICBsZXQgYSA9IGlucHV0cywgb3V0cHV0O1xuICAgICAgICBmb3IgKGxldCBsID0gMTsgbCA8IHRoaXMubnVtX25ldXJvbnNfcGVyX2xheWVyLmxlbmd0aDsgbCsrKSB7XG4gICAgICAgICAgICBvdXRwdXQgPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5udW1fbmV1cm9uc19wZXJfbGF5ZXJbbF07IGorKykge1xuICAgICAgICAgICAgICAgIGxldCB6ID0gdGhpcy5nZXRCaWFzKGwsIGopO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgdGhpcy5udW1fbmV1cm9uc19wZXJfbGF5ZXJbbCAtIDFdOyBrKyspXG4gICAgICAgICAgICAgICAgICAgIHogKz0gdGhpcy5nZXRXZWlnaHQobCwgaiwgaykgKiBhW2tdO1xuICAgICAgICAgICAgICAgIG91dHB1dFtqXSA9IDEgLyAoMSArIE1hdGguZXhwKC16KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhID0gb3V0cHV0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfVxuICAgIHJ1biguLi5pbnB1dHMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmVlZGZvcndhcmQoaW5wdXRzKTtcbiAgICB9XG4gICAgY29tcHV0ZU9mZnNldHMoKSB7XG4gICAgICAgIHRoaXMub2Zmc2V0cyA9IFswXTtcbiAgICAgICAgbGV0IG9mZnNldCA9IDA7XG4gICAgICAgIGZvciAobGV0IGwgPSAxOyBsIDwgdGhpcy5udW1fbmV1cm9uc19wZXJfbGF5ZXIubGVuZ3RoIC0gMTsgbCsrKSB7XG4gICAgICAgICAgICB0aGlzLm9mZnNldHMucHVzaCgob2Zmc2V0ICs9IHRoaXMubnVtX25ldXJvbnNfcGVyX2xheWVyW2wgLSAxXSAqICh0aGlzLm51bV9uZXVyb25zX3Blcl9sYXllcltsXSArIDEpKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHV0V2VpZ2h0cyhudW1fbmV1cm9uc19wZXJfbGF5ZXIsIHdlaWdodHNfYW5kX2JpYXNlcykge1xuICAgICAgICB0aGlzLm51bV9uZXVyb25zX3Blcl9sYXllciA9IG51bV9uZXVyb25zX3Blcl9sYXllcjtcbiAgICAgICAgdGhpcy5jb21wdXRlT2Zmc2V0cygpO1xuICAgICAgICBsZXQgTiA9IE5ldXJhbE5ldC53ZWlnaHRzQ291bnQobnVtX25ldXJvbnNfcGVyX2xheWVyKTtcbiAgICAgICAgaWYgKE4gIT09IHdlaWdodHNfYW5kX2JpYXNlcy5sZW5ndGgpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBudW1iZXIgb2Ygd2VpZ2h0cyBkbyBub3QgbWF0Y2ggdGhlIGdpdmVuIGFyY2hpdGVjdHVyZSwgZXhwZWN0ZWQgJHtOfSwgZ290ICR7d2VpZ2h0c19hbmRfYmlhc2VzLmxlbmd0aH0uYCk7XG4gICAgICAgIHRoaXMud2VpZ2h0c19hbmRfYmlhc2VzID0gd2VpZ2h0c19hbmRfYmlhc2VzO1xuICAgIH1cbiAgICAvL3JldHVybnMgdGhlIG51bWJlciBvZiB3ZWlnaHRzIChiaWFzZXMgaW5jbHVkZWQpIGZvciBhIGdpdmVuIGFyY2hpdGVjdHVyZVxuICAgIHN0YXRpYyB3ZWlnaHRzQ291bnQobnVtX25ldXJvbnNfcGVyX2xheWVyKSB7XG4gICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgIGZvciAobGV0IGwgPSAxOyBsIDwgbnVtX25ldXJvbnNfcGVyX2xheWVyLmxlbmd0aDsgbCsrKVxuICAgICAgICAgICAgY291bnQgKz0gbnVtX25ldXJvbnNfcGVyX2xheWVyW2xdICogKG51bV9uZXVyb25zX3Blcl9sYXllcltsIC0gMV0gKyAxKTtcbiAgICAgICAgcmV0dXJuIGNvdW50O1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB3ZWlnaHRzX2FuZF9iaWFzZXM6IHRoaXMud2VpZ2h0c19hbmRfYmlhc2VzLFxuICAgICAgICAgICAgbGF5ZXJzOiB0aGlzLm51bV9uZXVyb25zX3Blcl9sYXllclxuICAgICAgICB9O1xuICAgIH1cbiAgICB0b0Z1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYXJnczogWydpbnB1dHMnXSxcbiAgICAgICAgICAgIGJvZHk6IGBcbiAgICAgICAgICAgIHZhciBqc29uID0gJHtKU09OLnN0cmluZ2lmeSh0aGlzLnRvSlNPTigpKX07XG5cbiAgICAgICAgICAgIGlmIChpbnB1dHMubGVuZ3RoICE9PSBqc29uLmxheWVyc1swXSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkICcgKyBqc29uLmxheWVyc1swXSArICcgaW5wdXRzLCBnb3QgJyArIGlucHV0cy5sZW5ndGggKyAnLicpO1xuXG4gICAgICAgICAgICB2YXIgb2Zmc2V0cyA9ICR7SlNPTi5zdHJpbmdpZnkodGhpcy5vZmZzZXRzKX0sIGEgPSBpbnB1dHMsIG91dHB1dDtcblxuICAgICAgICAgICAgZm9yICh2YXIgbCA9IDE7IGwgPCBqc29uLmxheWVycy5sZW5ndGg7IGwrKykge1xuICAgICAgICAgICAgICAgIG91dHB1dCA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwganNvbi5sYXllcnNbbF07IGorKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgeiA9IGpzb24ud2VpZ2h0c19hbmRfYmlhc2VzW29mZnNldHNbbCAtIDFdICsgaiAqIChqc29uLmxheWVyc1tsIC0gMV0gKyAxKV07IFxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGpzb24ubGF5ZXJzW2wgLSAxXTsgaysrKVxuICAgICAgICAgICAgICAgICAgICAgICAgeiArPSBqc29uLndlaWdodHNfYW5kX2JpYXNlc1tvZmZzZXRzW2wgLSAxXSArIGogKiAoanNvbi5sYXllcnNbbCAtIDFdICsgMSkgKyBrICsgMV0gKiBhW2tdO1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXRbal0gPSAxIC8gKDEgKyBNYXRoLmV4cCgteikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhID0gb3V0cHV0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgICAgICBgXG4gICAgICAgIH07XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tSlNPTihqc29uKSB7XG4gICAgICAgIGNvbnN0IE5OID0gbmV3IE5ldXJhbE5ldCgpO1xuICAgICAgICBOTi5wdXRXZWlnaHRzKGpzb24ubGF5ZXJzLCBqc29uLndlaWdodHNfYW5kX2JpYXNlcyk7XG4gICAgICAgIHJldHVybiBOTjtcbiAgICB9XG4gICAgc3RhdGljIGZyb21XZWlnaHRzKG51bV9uZXVyb25zX3Blcl9sYXllciwgd2VpZ2h0c19hbmRfYmlhc2VzKSB7XG4gICAgICAgIGNvbnN0IE5OID0gbmV3IE5ldXJhbE5ldCgpO1xuICAgICAgICBOTi5wdXRXZWlnaHRzKG51bV9uZXVyb25zX3Blcl9sYXllciwgd2VpZ2h0c19hbmRfYmlhc2VzKTtcbiAgICAgICAgcmV0dXJuIE5OO1xuICAgIH1cbn1cbmV4cG9ydHMuTmV1cmFsTmV0ID0gTmV1cmFsTmV0O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jbGFzcyBWZWN0b3IyRCB7XG4gICAgY29uc3RydWN0b3IoeCwgeSkge1xuICAgICAgICB0aGlzLnggPSB4O1xuICAgICAgICB0aGlzLnkgPSB5O1xuICAgIH1cbiAgICBhZGQodikge1xuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjJEKHRoaXMueCArIHYueCwgdGhpcy55ICsgdi55KTtcbiAgICB9XG4gICAgc3ViKHYpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyRCh0aGlzLnggLSB2LngsIHRoaXMueSAtIHYueSk7XG4gICAgfVxuICAgIHBsdXModikge1xuICAgICAgICB0aGlzLnggKz0gdi54O1xuICAgICAgICB0aGlzLnkgKz0gdi55O1xuICAgIH1cbiAgICBtaW51cyh2KSB7XG4gICAgICAgIHRoaXMueCAtPSB2Lng7XG4gICAgICAgIHRoaXMueSAtPSB2Lnk7XG4gICAgfVxuICAgIGRvdCh2KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnggKiB2LnggKyB0aGlzLnkgKiB2Lnk7XG4gICAgfVxuICAgIGhhZGFtYXJkKHYpIHtcbiAgICAgICAgaWYgKHYgaW5zdGFuY2VvZiBWZWN0b3IyRClcbiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjdG9yMkQodGhpcy54ICogdi54LCB0aGlzLnkgKiB2LnkpO1xuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjJEKHRoaXMueCAqIHZbMF0sIHRoaXMueSAqIHZbMV0pO1xuICAgIH1cbiAgICBub3JtKCkge1xuICAgICAgICByZXR1cm4gTWF0aC5wb3codGhpcy5kb3QodGhpcyksIDAuNSk7XG4gICAgfVxuICAgIG5vcm1fc3EoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvdCh0aGlzKTtcbiAgICB9XG4gICAgdGltZXMoaykge1xuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjJEKHRoaXMueCAqIGssIHRoaXMueSAqIGspO1xuICAgIH1cbiAgICBub3JtYWxpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVzKDEgLyB0aGlzLm5vcm0oKSk7XG4gICAgfVxuICAgIGRpc3Qodikge1xuICAgICAgICByZXR1cm4gdGhpcy5zdWIodikubm9ybSgpO1xuICAgIH1cbiAgICBkaXN0X3NxKHYpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ViKHYpLm5vcm1fc3EoKTtcbiAgICB9XG4gICAgbWFwKGYpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyRChmKHRoaXMueCksIGYodGhpcy55KSk7XG4gICAgfVxuICAgIGFuZ2xlKCkge1xuICAgICAgICByZXR1cm4gTWF0aC5hdGFuMih0aGlzLnksIHRoaXMueCk7XG4gICAgfVxuICAgIHRvQXJyYXkoKSB7XG4gICAgICAgIHJldHVybiBbdGhpcy54LCB0aGlzLnldO1xuICAgIH1cbiAgICBmcm9tQXJyYXkoYXJyKSB7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yMkQoYXJyWzBdLCBhcnJbMV0pO1xuICAgIH1cbiAgICBzdGF0aWMgZmlsbChuKSB7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yMkQobiwgbik7XG4gICAgfVxuICAgIHN0YXRpYyB6ZXJvZXMoKSB7XG4gICAgICAgIHJldHVybiBWZWN0b3IyRC5maWxsKDApO1xuICAgIH1cbiAgICBzdGF0aWMgb25lcygpIHtcbiAgICAgICAgcmV0dXJuIFZlY3RvcjJELmZpbGwoMSk7XG4gICAgfVxuICAgIHN0YXRpYyByYW5kKCkge1xuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjJEKE1hdGgucmFuZG9tKCksIE1hdGgucmFuZG9tKCkpO1xuICAgIH1cbiAgICBzdGF0aWMgY2xvbmUodikge1xuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjJEKHYueCwgdi55KTtcbiAgICB9XG59XG5leHBvcnRzLlZlY3RvcjJEID0gVmVjdG9yMkQ7XG4iXSwic291cmNlUm9vdCI6IiJ9